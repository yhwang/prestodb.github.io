

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Noisy Aggregate Functions - Presto 0.288.1 Documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.359ec555e2989f00f.min.css?v=b000af5c" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-K7GB6F0LBZ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-K7GB6F0LBZ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-K7GB6F0LBZ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Presto 0.288.1 Documentation" class="md-header__button md-logo" aria-label="Presto 0.288.1 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Presto 0.288.1 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Noisy Aggregate Functions
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Presto 0.288.1 Documentation" class="md-nav__button md-logo" aria-label="Presto 0.288.1 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    Presto 0.288.1 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../clients.html" class="md-nav__link">
        <span class="md-ellipsis">Presto Clients</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../security.html" class="md-nav__link">
        <span class="md-ellipsis">Security</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../admin.html" class="md-nav__link">
        <span class="md-ellipsis">Administration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer.html" class="md-nav__link">
        <span class="md-ellipsis">Query Optimizer</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../connector.html" class="md-nav__link">
        <span class="md-ellipsis">Connectors</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin.html" class="md-nav__link">
        <span class="md-ellipsis">Plugins</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../functions.html"><span class="md-ellipsis">Functions and Operators</span></a>
          
            <label for="__nav_10">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Functions and Operators" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Functions and Operators</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="logical.html" class="md-nav__link">
        <span class="md-ellipsis">Logical Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="comparison.html" class="md-nav__link">
        <span class="md-ellipsis">Comparison Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="conditional.html" class="md-nav__link">
        <span class="md-ellipsis">Conditional Expressions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="lambda.html" class="md-nav__link">
        <span class="md-ellipsis">Lambda Expressions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="conversion.html" class="md-nav__link">
        <span class="md-ellipsis">Conversion Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="math.html" class="md-nav__link">
        <span class="md-ellipsis">Mathematical Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="bitwise.html" class="md-nav__link">
        <span class="md-ellipsis">Bitwise Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="decimal.html" class="md-nav__link">
        <span class="md-ellipsis">Decimal Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="string.html" class="md-nav__link">
        <span class="md-ellipsis">String Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="regexp.html" class="md-nav__link">
        <span class="md-ellipsis">Regular Expression Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="binary.html" class="md-nav__link">
        <span class="md-ellipsis">Binary Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="json.html" class="md-nav__link">
        <span class="md-ellipsis">JSON Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="datetime.html" class="md-nav__link">
        <span class="md-ellipsis">Date and Time Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="aggregate.html" class="md-nav__link">
        <span class="md-ellipsis">Aggregate Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Noisy Aggregate Functions</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Noisy Aggregate Functions</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/functions/noisy.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/functions/noisy.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#counts-sums-and-averages" class="md-nav__link">
    <span class="md-ellipsis">Counts, Sums, and Averages</span>
  </a>
  
    <nav class="md-nav" aria-label="Counts, Sums, and Averages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#noisy_count_gaussian-col-noise_scale-random_seed-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_count_gaussian(col, noise_scale[, random_seed]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>count_<wbr>gaussian<wbr>(col, noise_<wbr>scale<wbr>[, random_<wbr>seed]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_count_if_gaussian-col-noise_scale-random_seed-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_count_if_gaussian(col, noise_scale[, random_seed]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>count_<wbr>if_<wbr>gaussian<wbr>(col, noise_<wbr>scale<wbr>[, random_<wbr>seed]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_sum_gaussian-col-noise_scale-lower-upper-random_seed-double" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_sum_gaussian(col, noise_scale, lower, upper[, random_seed]) -&gt; double (JavaScript function)" class="md-ellipsis">noisy_<wbr>sum_<wbr>gaussian<wbr>(col, noise_<wbr>scale, lower, upper<wbr>[, random_<wbr>seed]) -<wbr>&gt; double</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_avg_gaussian-col-noise_scale-lower-upper-random_seed-double" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_avg_gaussian(col, noise_scale, lower, upper[, random_seed]) -&gt; double (JavaScript function)" class="md-ellipsis">noisy_<wbr>avg_<wbr>gaussian<wbr>(col, noise_<wbr>scale, lower, upper<wbr>[, random_<wbr>seed]) -<wbr>&gt; double</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#approximate-distinct-counting-sketching" class="md-nav__link">
    <span class="md-ellipsis">Approximate Distinct Counting/Sketching</span>
  </a>
  
    <nav class="md-nav" aria-label="Approximate Distinct Counting/Sketching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#noisy_approx_set_sfm-col-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_set_sfm(col, epsilon[, buckets[, precision]]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>set_<wbr>sfm<wbr>(col, epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_approx_set_sfm_from_index_and_zeros-col_index-col_zeros-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_set_sfm_from_index_and_zeros(col_index, col_zeros, epsilon, buckets[, precision]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>set_<wbr>sfm_<wbr>from_<wbr>index_<wbr>and_<wbr>zeros<wbr>(col_<wbr>index, col_<wbr>zeros, epsilon, buckets<wbr>[, precision]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_approx_distinct_sfm-col-epsilon-buckets-precision-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_distinct_sfm(col, epsilon[, buckets[, precision]]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>distinct_<wbr>sfm<wbr>(col, epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_empty_approx_set_sfm-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_empty_approx_set_sfm(epsilon[, buckets[, precision]]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>empty_<wbr>approx_<wbr>set_<wbr>sfm<wbr>(epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cardinality-SfmSketch-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="cardinality(SfmSketch) -&gt; bigint (JavaScript function)" class="md-ellipsis">cardinality<wbr>(Sfm<wbr>Sketch) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-SfmSketch-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="merge(SfmSketch) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">merge<wbr>(Sfm<wbr>Sketch) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge_sfm-ARRAY-SfmSketch-...-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="merge_sfm(ARRAY[SfmSketch, ...]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">merge_<wbr>sfm<wbr>(ARRAY<wbr>[Sfm<wbr>Sketch, ...<wbr>]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">Limitations</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="window.html" class="md-nav__link">
        <span class="md-ellipsis">Window Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="array.html" class="md-nav__link">
        <span class="md-ellipsis">Array Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="map.html" class="md-nav__link">
        <span class="md-ellipsis">Map Functions and Operators</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="url.html" class="md-nav__link">
        <span class="md-ellipsis">URL Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="ip.html" class="md-nav__link">
        <span class="md-ellipsis">IP Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="geospatial.html" class="md-nav__link">
        <span class="md-ellipsis">Geospatial Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hyperloglog.html" class="md-nav__link">
        <span class="md-ellipsis">Hyper<wbr>Log<wbr>Log Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="khyperloglog.html" class="md-nav__link">
        <span class="md-ellipsis">KHyper<wbr>Log<wbr>Log Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="qdigest.html" class="md-nav__link">
        <span class="md-ellipsis">Quantile Digest Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="uuid.html" class="md-nav__link">
        <span class="md-ellipsis">UUID functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tdigest.html" class="md-nav__link">
        <span class="md-ellipsis">T-<wbr>Digest Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="color.html" class="md-nav__link">
        <span class="md-ellipsis">Color Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="session.html" class="md-nav__link">
        <span class="md-ellipsis">Session Information</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="teradata.html" class="md-nav__link">
        <span class="md-ellipsis">Teradata Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="internationalization.html" class="md-nav__link">
        <span class="md-ellipsis">Internationalization Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="setdigest.html" class="md-nav__link">
        <span class="md-ellipsis">Set Digest functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="sketch.html" class="md-nav__link">
        <span class="md-ellipsis">Sketch Functions</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="pinot.html" class="md-nav__link">
        <span class="md-ellipsis">Pinot Functions</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../language.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Language</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../sql.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Statement Syntax</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../migration.html" class="md-nav__link">
        <span class="md-ellipsis">Migration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../rest.html" class="md-nav__link">
        <span class="md-ellipsis">REST API</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../ecosystem.html" class="md-nav__link">
        <span class="md-ellipsis">Ecosystem</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../router.html" class="md-nav__link">
        <span class="md-ellipsis">Router</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../develop.html" class="md-nav__link">
        <span class="md-ellipsis">Developer Guide</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../presto-cpp.html" class="md-nav__link">
        <span class="md-ellipsis">Presto C++</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../release.html" class="md-nav__link">
        <span class="md-ellipsis">Release Notes</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/functions/noisy.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/functions/noisy.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#counts-sums-and-averages" class="md-nav__link">
    <span class="md-ellipsis">Counts, Sums, and Averages</span>
  </a>
  
    <nav class="md-nav" aria-label="Counts, Sums, and Averages">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#noisy_count_gaussian-col-noise_scale-random_seed-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_count_gaussian(col, noise_scale[, random_seed]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>count_<wbr>gaussian<wbr>(col, noise_<wbr>scale<wbr>[, random_<wbr>seed]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_count_if_gaussian-col-noise_scale-random_seed-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_count_if_gaussian(col, noise_scale[, random_seed]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>count_<wbr>if_<wbr>gaussian<wbr>(col, noise_<wbr>scale<wbr>[, random_<wbr>seed]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_sum_gaussian-col-noise_scale-lower-upper-random_seed-double" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_sum_gaussian(col, noise_scale, lower, upper[, random_seed]) -&gt; double (JavaScript function)" class="md-ellipsis">noisy_<wbr>sum_<wbr>gaussian<wbr>(col, noise_<wbr>scale, lower, upper<wbr>[, random_<wbr>seed]) -<wbr>&gt; double</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_avg_gaussian-col-noise_scale-lower-upper-random_seed-double" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_avg_gaussian(col, noise_scale, lower, upper[, random_seed]) -&gt; double (JavaScript function)" class="md-ellipsis">noisy_<wbr>avg_<wbr>gaussian<wbr>(col, noise_<wbr>scale, lower, upper<wbr>[, random_<wbr>seed]) -<wbr>&gt; double</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#approximate-distinct-counting-sketching" class="md-nav__link">
    <span class="md-ellipsis">Approximate Distinct Counting/Sketching</span>
  </a>
  
    <nav class="md-nav" aria-label="Approximate Distinct Counting/Sketching">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#noisy_approx_set_sfm-col-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_set_sfm(col, epsilon[, buckets[, precision]]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>set_<wbr>sfm<wbr>(col, epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_approx_set_sfm_from_index_and_zeros-col_index-col_zeros-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_set_sfm_from_index_and_zeros(col_index, col_zeros, epsilon, buckets[, precision]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>set_<wbr>sfm_<wbr>from_<wbr>index_<wbr>and_<wbr>zeros<wbr>(col_<wbr>index, col_<wbr>zeros, epsilon, buckets<wbr>[, precision]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_approx_distinct_sfm-col-epsilon-buckets-precision-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_approx_distinct_sfm(col, epsilon[, buckets[, precision]]) -&gt; bigint (JavaScript function)" class="md-ellipsis">noisy_<wbr>approx_<wbr>distinct_<wbr>sfm<wbr>(col, epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#noisy_empty_approx_set_sfm-epsilon-buckets-precision-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="noisy_empty_approx_set_sfm(epsilon[, buckets[, precision]]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">noisy_<wbr>empty_<wbr>approx_<wbr>set_<wbr>sfm<wbr>(epsilon<wbr>[, buckets<wbr>[, precision]]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cardinality-SfmSketch-bigint" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="cardinality(SfmSketch) -&gt; bigint (JavaScript function)" class="md-ellipsis">cardinality<wbr>(Sfm<wbr>Sketch) -<wbr>&gt; bigint</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge-SfmSketch-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="merge(SfmSketch) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">merge<wbr>(Sfm<wbr>Sketch) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#merge_sfm-ARRAY-SfmSketch-...-SfmSketch" class="md-nav__link">
    <span aria-label="JavaScript function" class="objinfo-icon objinfo-icon__procedure" title="JavaScript function">M</span><span title="merge_sfm(ARRAY[SfmSketch, ...]) -&gt; SfmSketch (JavaScript function)" class="md-ellipsis">merge_<wbr>sfm<wbr>(ARRAY<wbr>[Sfm<wbr>Sketch, ...<wbr>]) -<wbr>&gt; Sfm<wbr>Sketch</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">Limitations</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/functions/noisy.rst" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>

<h1 id="noisy-aggregate-functions">Noisy Aggregate Functions<a class="headerlink" href="#noisy-aggregate-functions" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id10">Overview</a></p></li>
<li><p><a class="reference internal" href="#counts-sums-and-averages" id="id11">Counts, Sums, and Averages</a></p></li>
<li><p><a class="reference internal" href="#approximate-distinct-counting-sketching" id="id12">Approximate Distinct Counting/Sketching</a></p></li>
<li><p><a class="reference internal" href="#limitations" id="id13">Limitations</a></p></li>
</ul>
</nav>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Noisy aggregate functions are functions that provide random, noisy
approximations of common aggregations like <code class="xref js js-func docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="xref js js-func docutils literal notranslate"><span class="pre">count()</span></code>, and
<code class="xref js js-func docutils literal notranslate"><span class="pre">approx_distinct()</span></code> as well as sketches like <code class="xref js js-func docutils literal notranslate"><span class="pre">approx_set()</span></code>. By
injecting random noise into results, noisy aggregation functions make it more
difficult to determine or confirm the exact data that was aggregated.</p>
<p>While many of these functions resemble
<a class="reference external" href="https://en.wikipedia.org/wiki/Differential_privacy">differential privacy</a>
mechanisms, neither the values returned by these functions nor the query results
that incorporate these functions are differentially private in general.
See <a class="reference internal" href="#limitations">Limitations</a> below for more details. Users who wish to support a strong
privacy guarantee should discuss with a suitable technical expert first.</p>
<h2 id="counts-sums-and-averages">Counts, Sums, and Averages<a class="headerlink" href="#counts-sums-and-averages" title="Link to this heading">¶</a></h2>
<dl class="js function objdesc">
<dt class="sig sig-object highlight js" id="noisy_count_gaussian-col-noise_scale-random_seed-bigint">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_count_gaussian(col,</span> <span class="pre">noise_scale[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">bigint</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_count_gaussian-col-noise_scale-random_seed-bigint" title="Link to this definition">¶</a></dt>
<dd><p>Counts the non-<code class="docutils literal notranslate"><span class="pre">NULL</span></code> values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then adds a normally distributed
random double value with 0 mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">noise_scale</span></code> to the true count.
The noisy count is post-processed to be non-negative and rounded to bigint.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">noisy_count_gaussian</span><span class="p">(</span><span class="n">orderkey</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">lineitem</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 60179 (1 row)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">noisy_count_gaussian</span><span class="p">(</span><span class="n">orderkey</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">lineitem</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w"> </span><span class="c1">-- NULL (1 row)</span>
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Unlike <code class="xref js js-func docutils literal notranslate"><span class="pre">count()</span></code>, this function returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when the (true) count of <code class="docutils literal notranslate"><span class="pre">col</span></code> is 0.</p>
</div>
<p>Distinct counting can be performed using <code class="docutils literal notranslate"><span class="pre">noisy_count_gaussian(DISTINCT</span> <span class="pre">col,</span> <span class="pre">...)</span></code>, or with
<code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_approx_distinct_sfm()</span></code>. Generally speaking, <code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_count_gaussian()</span></code>
returns more accurate results but at a larger computational cost.</p>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js" id="noisy_count_if_gaussian-col-noise_scale-random_seed-bigint">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_count_if_gaussian(col,</span> <span class="pre">noise_scale[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">bigint</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_count_if_gaussian-col-noise_scale-random_seed-bigint" title="Link to this definition">¶</a></dt>
<dd><p>Counts the <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then adds a normally distributed random double
value with 0 mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">noise_scale</span></code> to the true count.
The noisy count is post-processed to be non-negative and rounded to bigint.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">noisy_count_if_gaussian</span><span class="p">(</span><span class="n">orderkey</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">lineitem</span><span class="p">;</span><span class="w"> </span><span class="c1">-- 50180 (1 row)</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">noisy_count_if_gaussian</span><span class="p">(</span><span class="n">orderkey</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">tpch</span><span class="p">.</span><span class="n">tiny</span><span class="p">.</span><span class="n">lineitem</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">false</span><span class="p">;</span><span class="w"> </span><span class="c1">-- NULL (1 row)</span>
</code></pre></div>
</div>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Unlike <code class="xref js js-func docutils literal notranslate"><span class="pre">count_if()</span></code>, this function returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when the (true) count is 0.</p>
</div>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_sum_gaussian-col-noise_scale-lower-upper-random_seed-double">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_sum_gaussian(col,</span> <span class="pre">noise_scale,</span> <span class="pre">lower,</span> <span class="pre">upper[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">double</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_sum_gaussian-col-noise_scale-lower-upper-random_seed-double" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the sum over the input values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then adds a normally distributed
random double value with 0 mean and standard deviation of noise_scale. Each value is clipped to the range
of [<code class="docutils literal notranslate"><span class="pre">lower</span></code>, <code class="docutils literal notranslate"><span class="pre">upper</span></code>] before adding to the sum.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_sum_gaussian(col,</span> <span class="pre">noise_scale[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">double</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Calculates the sum over the input values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then adds a normally
distributed random double value with 0 mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">noise_scale</span></code>.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_avg_gaussian-col-noise_scale-lower-upper-random_seed-double">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_avg_gaussian(col,</span> <span class="pre">noise_scale,</span> <span class="pre">lower,</span> <span class="pre">upper[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">double</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_avg_gaussian-col-noise_scale-lower-upper-random_seed-double" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the average (arithmetic mean) of all the input values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then
adds a normally distributed random double value with 0 mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">noise_scale</span></code>.
Each value is clipped to the range of [<code class="docutils literal notranslate"><span class="pre">lower</span></code>, <code class="docutils literal notranslate"><span class="pre">upper</span></code>] before averaging.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_avg_gaussian(col,</span> <span class="pre">noise_scale[,</span> <span class="pre">random_seed])</span> <span class="pre">-&gt;</span> <span class="pre">double</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span></dt>
<dd><p>Calculates the average (arithmetic mean) of all the input values in <code class="docutils literal notranslate"><span class="pre">col</span></code> and then adds
a normally distributed random double value with 0 mean and standard deviation of <code class="docutils literal notranslate"><span class="pre">noise_scale</span></code>.</p>
<p>If provided, <code class="docutils literal notranslate"><span class="pre">random_seed</span></code> is used to seed the random number generator. Otherwise,
noise is drawn from a secure random.</p>
</dd></dl>

<h2 id="approximate-distinct-counting-sketching">Approximate Distinct Counting/Sketching<a class="headerlink" href="#approximate-distinct-counting-sketching" title="Link to this heading">¶</a></h2>
<p>Noisy approximate distinct counting and sketching (analogous to the deterministic <a class="reference internal" href="hyperloglog.html"><span class="doc">HyperLogLog Functions</span></a>)
is supported via the Sketch-Flip-Merge (SFM) data sketch <a class="reference internal" href="#hehir2023" id="id1"><span>[Hehir2023]</span></a>.</p>
<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_approx_set_sfm-col-epsilon-buckets-precision-SfmSketch">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_approx_set_sfm(col,</span> <span class="pre">epsilon[,</span> <span class="pre">buckets[,</span> <span class="pre">precision]])</span> <span class="pre">-&gt;</span> <span class="pre">SfmSketch</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_approx_set_sfm-col-epsilon-buckets-precision-SfmSketch" title="Link to this definition">¶</a></dt>
<dd><p>Returns an SFM sketch of the input values in <code class="docutils literal notranslate"><span class="pre">col</span></code>. This is analogous to the
<code class="xref js js-func docutils literal notranslate"><span class="pre">approx_set()</span></code> function, which returns a (deterministic) HyperLogLog sketch.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">col</span></code> supports many types, similar to <code class="docutils literal notranslate"><span class="pre">HyperLogLog</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">epsilon</span></code> (double) is a positive number that controls the level of noise in
the sketch, as described in <a class="reference internal" href="#hehir2023" id="id2"><span>[Hehir2023]</span></a>. Smaller values of epsilon correspond
to noisier sketches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buckets</span></code> (int) defaults to 4096.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precision</span></code> (int) defaults to 24.</p></li>
</ul>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Unlike <code class="xref js js-func docutils literal notranslate"><span class="pre">approx_set()</span></code>, this function returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when <code class="docutils literal notranslate"><span class="pre">col</span></code> is empty.
If this behavior is undesirable, use <a class="reference internal" href="conditional.html#id2" title="coalesce"><code class="xref js js-func docutils literal notranslate"><span class="pre">coalesce()</span></code></a> with <code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_empty_approx_set_sfm()</span></code>.</p>
</div>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_approx_set_sfm_from_index_and_zeros-col_index-col_zeros-epsilon-buckets-precision-SfmSketch">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_approx_set_sfm_from_index_and_zeros(col_index,</span> <span class="pre">col_zeros,</span> <span class="pre">epsilon,</span> <span class="pre">buckets[,</span> <span class="pre">precision])</span> <span class="pre">-&gt;</span> <span class="pre">SfmSketch</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_approx_set_sfm_from_index_and_zeros-col_index-col_zeros-epsilon-buckets-precision-SfmSketch" title="Link to this definition">¶</a></dt>
<dd><p>Returns an SFM sketch of the input values in <code class="docutils literal notranslate"><span class="pre">col_index</span></code> and <code class="docutils literal notranslate"><span class="pre">col_zeros</span></code>.</p>
<p>This is similar to <code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_approx_set_sfm()</span></code> except that function calculates a <code class="docutils literal notranslate"><span class="pre">Murmur3Hash128.hash64()</span></code> of <code class="docutils literal notranslate"><span class="pre">col</span></code>,
and calculates the SFM PCSA bucket index and number of trailing zeros as described in
<a class="reference internal" href="#flajoletmartin1985" id="id3"><span>[FlajoletMartin1985]</span></a>. In this function, the caller must explicitly calculate the hash bucket index
and zeros themselves and pass them as arguments <code class="docutils literal notranslate"><span class="pre">col_index</span></code> and <code class="docutils literal notranslate"><span class="pre">col_zeros</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">col_index</span></code> (bigint) must be in the range <code class="docutils literal notranslate"><span class="pre">0..buckets-1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">col_zeros</span></code> (bigint) must be in the range <code class="docutils literal notranslate"><span class="pre">0..64</span></code>. If it exceeds <code class="docutils literal notranslate"><span class="pre">precision</span></code>, it
is cropped to <code class="docutils literal notranslate"><span class="pre">precision-1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">epsilon</span></code> (double) is a positive number that controls the level of noise in
the sketch, as described in <a class="reference internal" href="#hehir2023" id="id4"><span>[Hehir2023]</span></a>. Smaller values of epsilon correspond
to noisier sketches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buckets</span></code> (int) is the number of buckets in the SFM PCSA sketch as described in <a class="reference internal" href="#hehir2023" id="id5"><span>[Hehir2023]</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precision</span></code> (int) defaults to 24.</p></li>
</ul>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Like  <code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_approx_set_sfm()</span></code>, this function returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when <code class="docutils literal notranslate"><span class="pre">col_index</span></code>
or <code class="docutils literal notranslate"><span class="pre">col_zeros</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.
If this behavior is undesirable, use <a class="reference internal" href="conditional.html#id2" title="coalesce"><code class="xref js js-func docutils literal notranslate"><span class="pre">coalesce()</span></code></a> with <code class="xref js js-func docutils literal notranslate"><span class="pre">noisy_empty_approx_set_sfm()</span></code>.</p>
</div>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_approx_distinct_sfm-col-epsilon-buckets-precision-bigint">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_approx_distinct_sfm(col,</span> <span class="pre">epsilon[,</span> <span class="pre">buckets[,</span> <span class="pre">precision]])</span> <span class="pre">-&gt;</span> <span class="pre">bigint</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_approx_distinct_sfm-col-epsilon-buckets-precision-bigint" title="Link to this definition">¶</a></dt>
<dd><p>Equivalent to <code class="docutils literal notranslate"><span class="pre">cardinality(noisy_approx_set_sfm(col,</span> <span class="pre">epsilon,</span> <span class="pre">buckets,</span> <span class="pre">precision))</span></code>,
this returns the approximate cardinality (distinct count) of the column <code class="docutils literal notranslate"><span class="pre">col</span></code>.
This is analogous to the (deterministic) <code class="xref js js-func docutils literal notranslate"><span class="pre">approx_distinct()</span></code> function.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Unlike <code class="xref js js-func docutils literal notranslate"><span class="pre">approx_distinct()</span></code>, this function returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when <code class="docutils literal notranslate"><span class="pre">col</span></code> is empty.</p>
</div>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight sig-wrap js" id="noisy_empty_approx_set_sfm-epsilon-buckets-precision-SfmSketch">
<span class="sig-name descname"><span class="n"><span class="pre">noisy_empty_approx_set_sfm(epsilon[,</span> <span class="pre">buckets[,</span> <span class="pre">precision]])</span> <span class="pre">-&gt;</span> <span class="pre">SfmSketch</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#noisy_empty_approx_set_sfm-epsilon-buckets-precision-SfmSketch" title="Link to this definition">¶</a></dt>
<dd><p>Returns an SFM sketch with no items in it. This is analogous to the <code class="xref js js-func docutils literal notranslate"><span class="pre">empty_approx_set()</span></code>
function, which returns an empty (deterministic) HyperLogLog sketch.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">epsilon</span></code> (double) is a positive number that controls the level of noise in the sketch,
as described in <a class="reference internal" href="#hehir2023" id="id6"><span>[Hehir2023]</span></a>. Smaller values of epsilon correspond to noisier sketches.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buckets</span></code> (int) defaults to 4096.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precision</span></code> (int) defaults to 24.</p></li>
</ul>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js" id="cardinality-SfmSketch-bigint">
<span class="sig-name descname"><span class="n"><span class="pre">cardinality(SfmSketch)</span> <span class="pre">-&gt;</span> <span class="pre">bigint</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#cardinality-SfmSketch-bigint" title="Link to this definition">¶</a></dt>
<dd><p>Returns the estimated cardinality (distinct count) of an <code class="docutils literal notranslate"><span class="pre">SfmSketch</span></code> object.</p>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js" id="merge-SfmSketch-SfmSketch">
<span class="sig-name descname"><span class="n"><span class="pre">merge(SfmSketch)</span> <span class="pre">-&gt;</span> <span class="pre">SfmSketch</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#merge-SfmSketch-SfmSketch" title="Link to this definition">¶</a></dt>
<dd><p>An aggregator function that returns a merged <code class="docutils literal notranslate"><span class="pre">SfmSketch</span></code> of the set union of
individual <code class="docutils literal notranslate"><span class="pre">SfmSketch</span></code> objects, similar to <code class="docutils literal notranslate"><span class="pre">merge(HyperLogLog)</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="k">year</span><span class="p">,</span><span class="w"> </span><span class="k">cardinality</span><span class="p">(</span><span class="n">merge</span><span class="p">(</span><span class="n">sketch</span><span class="p">))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">annual_distinct_count</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">monthly_sketches</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
</code></pre></div>
</div>
</dd></dl>

<dl class="js function objdesc">
<dt class="sig sig-object highlight js" id="merge_sfm-ARRAY-SfmSketch-...-SfmSketch">
<span class="sig-prename descclassname"><span class="n"><span class="pre">merge_sfm(ARRAY[SfmSketch,</span> </span><span class="p"><span class="pre">.</span></span><span class="n"></span><span class="p"><span class="pre">.</span></span><span class="n"></span><span class="p"><span class="pre">.</span></span></span><span class="sig-name descname"><span class="n"><span class="pre">])</span> <span class="pre">-&gt;</span> <span class="pre">SfmSketch</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#merge_sfm-ARRAY-SfmSketch-...-SfmSketch" title="Link to this definition">¶</a></dt>
<dd><p>A scalar function that returns a merged <code class="docutils literal notranslate"><span class="pre">SfmSketch</span></code> of the set union of an array
of <code class="docutils literal notranslate"><span class="pre">SfmSketch</span></code> objects, similar to <code class="xref js js-func docutils literal notranslate"><span class="pre">merge_hll()</span></code>.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="k">cardinality</span><span class="p">(</span><span class="n">merge_sfm</span><span class="p">(</span><span class="nb">ARRAY</span><span class="p">[</span>
<span class="w">    </span><span class="n">noisy_approx_set_sfm</span><span class="p">(</span><span class="n">col_1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span>
<span class="w">    </span><span class="n">noisy_approx_set_sfm</span><span class="p">(</span><span class="n">col_2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">),</span>
<span class="w">    </span><span class="n">noisy_approx_set_sfm</span><span class="p">(</span><span class="n">col_3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">)</span>
<span class="p">]))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">distinct_count_over_3_cols</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">my_table</span>
</code></pre></div>
</div>
</dd></dl>

<h2 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Link to this heading">¶</a></h2>
<p>While these functions resemble differential privacy mechanisms, the values returned
by these functions are not differentially private in general. There are several
important limitations to keep in mind if using these functions for
privacy-preserving purposes, including:</p>
<ul class="simple">
<li><p>All noisy aggregate functions return <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when aggregating empty sets.
This means a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> return value noiselessly indicates the absence of data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code> clauses used in combination with noisy aggregation functions
reveal non-noisy information: the presence or absence of a group noiselessly
indicates the presence or absence of data. See, e.g., <a class="reference internal" href="#wilkins2024" id="id7"><span>[Wilkins2024]</span></a>.</p></li>
<li><p>Functions relying on floating-point noise may be susceptible to inference
attacks such as those identified in <a class="reference internal" href="#mironov2012" id="id8"><span>[Mironov2012]</span></a> and <a class="reference internal" href="#casacuberta2022" id="id9"><span>[Casacuberta2022]</span></a>.</p></li>
</ul>
<hr class="docutils" />
<div role="list" class="citation-list">
<div class="citation" id="casacuberta2022" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">Casacuberta2022</a><span class="fn-bracket">]</span></span>
<p>Casacuberta, S., Shoemate, M., Vadhan, S., &amp; Wagaman, C.
(2022). <a class="reference external" href="https://arxiv.org/pdf/2207.10635">Widespread Underestimation of Sensitivity in Differentially Private
Libraries and How to Fix It.</a> In <em>Proceedings
of the 2022 ACM SIGSAC Conference on Computer and Communications Security</em> (pp. 471-484).</p>
</div>
<div class="citation" id="hehir2023" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span>Hehir2023<span class="fn-bracket">]</span></span>
<span class="backrefs">(<a role="doc-backlink" href="#id1">1</a>,<a role="doc-backlink" href="#id2">2</a>,<a role="doc-backlink" href="#id4">3</a>,<a role="doc-backlink" href="#id5">4</a>,<a role="doc-backlink" href="#id6">5</a>)</span>
<p>Hehir, J., Ting, D., &amp; Cormode, G. (2023). <a class="reference external" href="https://proceedings.mlr.press/v202/hehir23a/hehir23a.pdf">Sketch-Flip-Merge:
Mergeable Sketches for Private Distinct Counting.</a> In <em>Proceedings of
the 40th International Conference on Machine Learning</em> (Vol. 202).</p>
</div>
<div class="citation" id="mironov2012" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">Mironov2012</a><span class="fn-bracket">]</span></span>
<p>Mironov, I. (2012). <a class="reference external" href="https://www.microsoft.com/en-us/research/wp-content/uploads/2012/10/lsbs.pdf">On significance of the least significant bits
for differential privacy.</a>
In <em>Proceedings of the 2012 ACM Conference on Computer and Communications Security</em> (pp. 650-661).</p>
</div>
<div class="citation" id="wilkins2024" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">Wilkins2024</a><span class="fn-bracket">]</span></span>
<p>Wilkins, A., Kifer, D., Zhang, D., &amp; Karrer, B. (2024). <a class="reference external" href="https://journalprivacyconfidentiality.org/index.php/jpc/article/view/823/755">Exact
Privacy Analysis of the Gaussian Sparse Histogram Mechanism.</a>
<em>Journal of Privacy and Confidentiality</em>, 14 (1).</p>
</div>
<div class="citation" id="flajoletmartin1985" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">FlajoletMartin1985</a><span class="fn-bracket">]</span></span>
<p>Flajolet, P, Martin, G. N. (1985). <a class="reference external" href="https://algo.inria.fr/flajolet/Publications/src/FlMa85.pdf">Probabilistic Counting Algorithms for Data Base Applications.</a>
In <em>Journal of Computer and System Sciences</em>, 31:182–209, 1985</p>
</div>
</div>



  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="aggregate.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Aggregate Functions" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Aggregate Functions
            </div>
          </div>
        </a>
      
      
        
        <a href="window.html" class="md-footer__link md-footer__link--next" aria-label="Next: Window Functions" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Window Functions
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright The Presto Foundation. All rights reserved. Presto is a registered trademark of LF Projects, LLC.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/prestodb/presto" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.follow", "toc.sticky"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    
  </body>
</html>