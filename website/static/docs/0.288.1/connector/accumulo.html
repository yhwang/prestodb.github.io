

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Accumulo Connector - Presto 0.288.1 Documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.359ec555e2989f00f.min.css?v=b000af5c" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-K7GB6F0LBZ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-K7GB6F0LBZ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-K7GB6F0LBZ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Presto 0.288.1 Documentation" class="md-header__button md-logo" aria-label="Presto 0.288.1 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Presto 0.288.1 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Accumulo Connector
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Presto 0.288.1 Documentation" class="md-nav__button md-logo" aria-label="Presto 0.288.1 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    Presto 0.288.1 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../clients.html" class="md-nav__link">
        <span class="md-ellipsis">Presto Clients</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../security.html" class="md-nav__link">
        <span class="md-ellipsis">Security</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../admin.html" class="md-nav__link">
        <span class="md-ellipsis">Administration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer.html" class="md-nav__link">
        <span class="md-ellipsis">Query Optimizer</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../connector.html"><span class="md-ellipsis">Connectors</span></a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Connectors" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Connectors</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Accumulo Connector</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Accumulo Connector</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/accumulo.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/connector/accumulo.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#installing-the-iterator-dependency" class="md-nav__link">
    <span class="md-ellipsis">Installing the Iterator Dependency</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#connector-configuration" class="md-nav__link">
    <span class="md-ellipsis">Connector Configuration</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#configuration-variables" class="md-nav__link">
    <span class="md-ellipsis">Configuration Variables</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#unsupported-features" class="md-nav__link">
    <span class="md-ellipsis">Unsupported Features</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">Usage</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#indexing-columns" class="md-nav__link">
    <span class="md-ellipsis">Indexing Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#loading-data" class="md-nav__link">
    <span class="md-ellipsis">Loading Data</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#external-tables" class="md-nav__link">
    <span class="md-ellipsis">External Tables</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#table-properties" class="md-nav__link">
    <span class="md-ellipsis">Table Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#session-properties" class="md-nav__link">
    <span class="md-ellipsis">Session Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#adding-columns" class="md-nav__link">
    <span class="md-ellipsis">Adding Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#serializers" class="md-nav__link">
    <span class="md-ellipsis">Serializers</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#metadata-management" class="md-nav__link">
    <span class="md-ellipsis">Metadata Management</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#converting-table-from-internal-to-external" class="md-nav__link">
    <span class="md-ellipsis">Converting Table from Internal to External</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="bigquery.html" class="md-nav__link">
        <span class="md-ellipsis">Big<wbr>Query Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="blackhole.html" class="md-nav__link">
        <span class="md-ellipsis">Black Hole Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="cassandra.html" class="md-nav__link">
        <span class="md-ellipsis">Cassandra Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="clickhouse.html" class="md-nav__link">
        <span class="md-ellipsis">Click<wbr>House connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="deltalake.html" class="md-nav__link">
        <span class="md-ellipsis">Delta Lake Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="druid.html" class="md-nav__link">
        <span class="md-ellipsis">Druid Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="elasticsearch.html" class="md-nav__link">
        <span class="md-ellipsis">Elasticsearch Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="googlesheets.html" class="md-nav__link">
        <span class="md-ellipsis">Google Sheets connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hana.html" class="md-nav__link">
        <span class="md-ellipsis">HANA Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hive.html" class="md-nav__link">
        <span class="md-ellipsis">Hive Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hive-security.html" class="md-nav__link">
        <span class="md-ellipsis">Hive Security Configuration</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hudi.html" class="md-nav__link">
        <span class="md-ellipsis">Hudi Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="iceberg.html" class="md-nav__link">
        <span class="md-ellipsis">Iceberg Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="jmx.html" class="md-nav__link">
        <span class="md-ellipsis">JMX Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kafka.html" class="md-nav__link">
        <span class="md-ellipsis">Kafka Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kafka-tutorial.html" class="md-nav__link">
        <span class="md-ellipsis">Kafka Connector Tutorial</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kudu.html" class="md-nav__link">
        <span class="md-ellipsis">Kudu Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="larksheets.html" class="md-nav__link">
        <span class="md-ellipsis">Lark Sheets connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="localfile.html" class="md-nav__link">
        <span class="md-ellipsis">Local File Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="memory.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mongodb.html" class="md-nav__link">
        <span class="md-ellipsis">Mongo<wbr>DB Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mysql.html" class="md-nav__link">
        <span class="md-ellipsis">My<wbr>SQL Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="oracle.html" class="md-nav__link">
        <span class="md-ellipsis">Oracle Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="pinot.html" class="md-nav__link">
        <span class="md-ellipsis">Apache Pinot Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="postgresql.html" class="md-nav__link">
        <span class="md-ellipsis">Postgre<wbr>SQL Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="prometheus.html" class="md-nav__link">
        <span class="md-ellipsis">Prometheus Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="redis.html" class="md-nav__link">
        <span class="md-ellipsis">Redis Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="redshift.html" class="md-nav__link">
        <span class="md-ellipsis">Redshift Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="scylladb.html" class="md-nav__link">
        <span class="md-ellipsis">Scylla<wbr>DB Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="singlestore.html" class="md-nav__link">
        <span class="md-ellipsis">Single<wbr>Store Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="sqlserver.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Server Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="system.html" class="md-nav__link">
        <span class="md-ellipsis">System Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="thrift.html" class="md-nav__link">
        <span class="md-ellipsis">Thrift Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tpcds.html" class="md-nav__link">
        <span class="md-ellipsis">TPCDS Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tpch.html" class="md-nav__link">
        <span class="md-ellipsis">TPCH Connector</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin.html" class="md-nav__link">
        <span class="md-ellipsis">Plugins</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../functions.html" class="md-nav__link">
        <span class="md-ellipsis">Functions and Operators</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../language.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Language</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../sql.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Statement Syntax</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../migration.html" class="md-nav__link">
        <span class="md-ellipsis">Migration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../rest.html" class="md-nav__link">
        <span class="md-ellipsis">REST API</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../ecosystem.html" class="md-nav__link">
        <span class="md-ellipsis">Ecosystem</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../router.html" class="md-nav__link">
        <span class="md-ellipsis">Router</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../develop.html" class="md-nav__link">
        <span class="md-ellipsis">Developer Guide</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../presto-cpp.html" class="md-nav__link">
        <span class="md-ellipsis">Presto C++</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../release.html" class="md-nav__link">
        <span class="md-ellipsis">Release Notes</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/accumulo.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/connector/accumulo.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#installing-the-iterator-dependency" class="md-nav__link">
    <span class="md-ellipsis">Installing the Iterator Dependency</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#connector-configuration" class="md-nav__link">
    <span class="md-ellipsis">Connector Configuration</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#configuration-variables" class="md-nav__link">
    <span class="md-ellipsis">Configuration Variables</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#unsupported-features" class="md-nav__link">
    <span class="md-ellipsis">Unsupported Features</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">Usage</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#indexing-columns" class="md-nav__link">
    <span class="md-ellipsis">Indexing Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#loading-data" class="md-nav__link">
    <span class="md-ellipsis">Loading Data</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#external-tables" class="md-nav__link">
    <span class="md-ellipsis">External Tables</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#table-properties" class="md-nav__link">
    <span class="md-ellipsis">Table Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#session-properties" class="md-nav__link">
    <span class="md-ellipsis">Session Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#adding-columns" class="md-nav__link">
    <span class="md-ellipsis">Adding Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#serializers" class="md-nav__link">
    <span class="md-ellipsis">Serializers</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#metadata-management" class="md-nav__link">
    <span class="md-ellipsis">Metadata Management</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#converting-table-from-internal-to-external" class="md-nav__link">
    <span class="md-ellipsis">Converting Table from Internal to External</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/accumulo.rst" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>

<h1 id="accumulo-connector">Accumulo Connector<a class="headerlink" href="#accumulo-connector" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#installing-the-iterator-dependency" id="id2">Installing the Iterator Dependency</a></p></li>
<li><p><a class="reference internal" href="#connector-configuration" id="id3">Connector Configuration</a></p></li>
<li><p><a class="reference internal" href="#configuration-variables" id="id4">Configuration Variables</a></p></li>
<li><p><a class="reference internal" href="#unsupported-features" id="id5">Unsupported Features</a></p></li>
<li><p><a class="reference internal" href="#usage" id="id6">Usage</a></p></li>
<li><p><a class="reference internal" href="#indexing-columns" id="id7">Indexing Columns</a></p></li>
<li><p><a class="reference internal" href="#loading-data" id="id8">Loading Data</a></p></li>
<li><p><a class="reference internal" href="#external-tables" id="id9">External Tables</a></p></li>
<li><p><a class="reference internal" href="#table-properties" id="id10">Table Properties</a></p></li>
<li><p><a class="reference internal" href="#session-properties" id="id11">Session Properties</a></p></li>
<li><p><a class="reference internal" href="#adding-columns" id="id12">Adding Columns</a></p></li>
<li><p><a class="reference internal" href="#serializers" id="id13">Serializers</a></p></li>
<li><p><a class="reference internal" href="#metadata-management" id="id14">Metadata Management</a></p></li>
<li><p><a class="reference internal" href="#converting-table-from-internal-to-external" id="id15">Converting Table from Internal to External</a></p></li>
</ul>
</nav>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The Accumulo connector supports reading and writing data from Apache Accumulo.
Please read this page thoroughly to understand the capabilities and features of the connector.</p>
<h2 id="installing-the-iterator-dependency">Installing the Iterator Dependency<a class="headerlink" href="#installing-the-iterator-dependency" title="Link to this heading">¶</a></h2>
<p>The Accumulo connector uses custom Accumulo iterators in
order to push various information in a SQL predicate clause to Accumulo for
server-side filtering, known as <em>predicate pushdown</em>. In order
for the server-side iterators to work, you need to add the <code class="docutils literal notranslate"><span class="pre">presto-accumulo</span></code>
jar file to Accumulo’s <code class="docutils literal notranslate"><span class="pre">lib/ext</span></code> directory on each TabletServer node.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code><span class="c1"># For each TabletServer node:</span>
scp<span class="w"> </span><span class="nv">$PRESTO_HOME</span>/plugins/accumulo/presto-accumulo-*.jar<span class="w"> </span><span class="o">[</span>tabletserver_address<span class="o">]</span>:<span class="nv">$ACCUMULO_HOME</span>/lib/ext

<span class="c1"># TabletServer should pick up new JAR files in ext directory, but may require restart</span>
</code></pre></div>
</div>
<p>Note that this uses Java 8.  If your Accumulo cluster is using Java 7,
you’ll receive an <code class="docutils literal notranslate"><span class="pre">Unsupported</span> <span class="pre">major.minor</span> <span class="pre">version</span> <span class="pre">52.0</span></code> error in your TabletServer logs when you
attempt to create an indexed table.  You’ll instead need to use the <em>presto-accumulo-iterators</em> jar file
that is located at <a class="reference external" href="https://github.com/bloomberg/presto-accumulo">https://github.com/bloomberg/presto-accumulo</a>.</p>
<h2 id="connector-configuration">Connector Configuration<a class="headerlink" href="#connector-configuration" title="Link to this heading">¶</a></h2>
<p>Create <code class="docutils literal notranslate"><span class="pre">etc/catalog/accumulo.properties</span></code>
to mount the <code class="docutils literal notranslate"><span class="pre">accumulo</span></code> connector as the <code class="docutils literal notranslate"><span class="pre">accumulo</span></code> catalog,
replacing the <code class="docutils literal notranslate"><span class="pre">accumulo.xxx</span></code> properties as required:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>connector.name=accumulo
accumulo.instance=xxx
accumulo.zookeepers=xxx
accumulo.username=username
accumulo.password=password
</code></pre></div>
</div>
<h2 id="configuration-variables">Configuration Variables<a class="headerlink" href="#configuration-variables" title="Link to this heading">¶</a></h2>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.instance</span></code></p></td>
<td><p>(none)</p></td>
<td><p>Yes</p></td>
<td><p>Name of the Accumulo instance</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.zookeepers</span></code></p></td>
<td><p>(none)</p></td>
<td><p>Yes</p></td>
<td><p>ZooKeeper connect string</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.username</span></code></p></td>
<td><p>(none)</p></td>
<td><p>Yes</p></td>
<td><p>Accumulo user for Presto</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.password</span></code></p></td>
<td><p>(none)</p></td>
<td><p>Yes</p></td>
<td><p>Accumulo password for user</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.zookeeper.metadata.root</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/presto-accumulo</span></code></p></td>
<td><p>No</p></td>
<td><p>Root znode for storing metadata. Only relevant if using default Metadata Manager</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.cardinality.cache.size</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">100000</span></code></p></td>
<td><p>No</p></td>
<td><p>Sets the size of the index cardinality cache</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accumulo.cardinality.cache.expire.duration</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5m</span></code></p></td>
<td><p>No</p></td>
<td><p>Sets the expiration duration of the cardinality cache.</p></td>
</tr>
</tbody>
</table>
<h2 id="unsupported-features">Unsupported Features<a class="headerlink" href="#unsupported-features" title="Link to this heading">¶</a></h2>
<p>The following features are not supported:</p>
<ul class="simple">
<li><p>Adding columns via <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code>: While you cannot add columns via SQL, you can using a tool.
See the below section on <a class="reference external" href="#adding-columns">Adding Columns</a> for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code>: Deletion of rows is not yet implemented for the connector.</p></li>
</ul>
<h2 id="usage">Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h2>
<p>Simply begin using SQL to create a new table in Accumulo to begin
working with data. By default, the first column of the table definition
is set to the Accumulo row ID. This should be the primary key of your
table, and keep in mind that any <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements containing the same
row ID is effectively an UPDATE as far as Accumulo is concerned, as any
previous data in the cell will be overwritten. The row ID can be
any valid Presto datatype. If the first column is not your primary key, you
can set the row ID column using the <code class="docutils literal notranslate"><span class="pre">row_id</span></code> table property within the <code class="docutils literal notranslate"><span class="pre">WITH</span></code>
clause of your table definition.</p>
<p>Simply issue a <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> statement to create a new Presto/Accumulo table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DESCRIBE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>  Column   |  Type   | Extra |                      Comment
-----------+---------+-------+---------------------------------------------------
 recordkey | varchar |       | Accumulo row ID
 name      | varchar |       | Accumulo column name:name. Indexed: false
 age       | bigint  |       | Accumulo column age:age. Indexed: false
 birthday  | date    |       | Accumulo column birthday:birthday. Indexed: false
</code></pre></div>
</div>
<p>This command will create a new Accumulo table with the <code class="docutils literal notranslate"><span class="pre">recordkey</span></code> column
as the Accumulo row ID. The name, age, and birthday columns are mapped to
auto-generated column family and qualifier values (which, in practice,
are both identical to the Presto column name).</p>
<p>When creating a table using SQL, you can optionally specify a
<code class="docutils literal notranslate"><span class="pre">column_mapping</span></code> table property. The value of this property is a
comma-delimited list of triples, presto column <strong>:</strong> accumulo column
family <strong>:</strong> accumulo column qualifier, with one triple for every
non-row ID column. This sets the mapping of the Presto column name to
the corresponding Accumulo column family and column qualifier.</p>
<p>If you don’t specify the <code class="docutils literal notranslate"><span class="pre">column_mapping</span></code> table property, then the
connector will auto-generate column names (respecting any configured locality groups).
Auto-generation of column names is only available for internal tables, so if your
table is external you must specify the column_mapping property.</p>
<p>For a full list of table properties, see <a class="reference external" href="#table-properties">Table Properties</a>.</p>
<p>For example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name:metadata:name,age:metadata:age,birthday:metadata:date&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DESCRIBE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>  Column   |  Type   | Extra |                    Comment
-----------+---------+-------+-----------------------------------------------
 recordkey | varchar |       | Accumulo row ID
 name      | varchar |       | Accumulo column metadata:name. Indexed: false
 age       | bigint  |       | Accumulo column metadata:age. Indexed: false
 birthday  | date    |       | Accumulo column metadata:date. Indexed: false
</code></pre></div>
</div>
<p>You can then issue <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements to put data into Accumulo.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>While issuing <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements is convenient,
this method of loading data into Accumulo is low-throughput. You’ll want
to use the Accumulo APIs to write <code class="docutils literal notranslate"><span class="pre">Mutations</span></code> directly to the tables.
See the section on <a class="reference external" href="#loading-data">Loading Data</a> for more details.</p>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;row1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Grace Hopper&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1906-12-09&#39;</span><span class="w"> </span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;row2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Alan Turing&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1912-06-23&#39;</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code> recordkey |     name     | age |  birthday
-----------+--------------+-----+------------
 row1      | Grace Hopper | 109 | 1906-12-09
 row2      | Alan Turing  | 103 | 1912-06-23
(2 rows)
</code></pre></div>
</div>
<p>As you’d expect, rows inserted into Accumulo via the shell or
programmatically will also show up when queried. (The Accumulo shell
thinks “-5321” is an option and not a number… so we’ll just make TBL a
little younger.)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><code>$<span class="w"> </span>accumulo<span class="w"> </span>shell<span class="w"> </span>-u<span class="w"> </span>root<span class="w"> </span>-p<span class="w"> </span>secret
root@default&gt;<span class="w"> </span>table<span class="w"> </span>myschema.scientists
root@default<span class="w"> </span>myschema.scientists&gt;<span class="w"> </span>insert<span class="w"> </span>row3<span class="w"> </span>metadata<span class="w"> </span>name<span class="w"> </span><span class="s2">&quot;Tim Berners-Lee&quot;</span>
root@default<span class="w"> </span>myschema.scientists&gt;<span class="w"> </span>insert<span class="w"> </span>row3<span class="w"> </span>metadata<span class="w"> </span>age<span class="w"> </span><span class="m">60</span>
root@default<span class="w"> </span>myschema.scientists&gt;<span class="w"> </span>insert<span class="w"> </span>row3<span class="w"> </span>metadata<span class="w"> </span>date<span class="w"> </span><span class="m">5321</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code> recordkey |      name       | age |  birthday
-----------+-----------------+-----+------------
 row1      | Grace Hopper    | 109 | 1906-12-09
 row2      | Alan Turing     | 103 | 1912-06-23
 row3      | Tim Berners-Lee |  60 | 1984-07-27
(3 rows)
</code></pre></div>
</div>
<p>You can also drop tables using <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span></code>. This command drops both
metadata and the tables. See the below section on <a class="reference external" href="#external-tables">External
Tables</a> for more details on internal and external
tables.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="p">;</span>
</code></pre></div>
</div>
<h2 id="indexing-columns">Indexing Columns<a class="headerlink" href="#indexing-columns" title="Link to this heading">¶</a></h2>
<p>Internally, the connector creates an Accumulo <code class="docutils literal notranslate"><span class="pre">Range</span></code> and packs it in
a split. This split gets passed to a Presto Worker to read the data from
the <code class="docutils literal notranslate"><span class="pre">Range</span></code> via a <code class="docutils literal notranslate"><span class="pre">BatchScanner</span></code>. When issuing a query that results
in a full table scan, each Presto Worker gets a single <code class="docutils literal notranslate"><span class="pre">Range</span></code> that
maps to a single tablet of the table. When issuing a query with a
predicate (i.e. <code class="docutils literal notranslate"><span class="pre">WHERE</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">10</span></code> clause), Presto passes the values
within the predicate (<code class="docutils literal notranslate"><span class="pre">10</span></code>) to the connector so it can use this
information to scan less data. When the Accumulo row ID is used as part
of the predicate clause, this narrows down the <code class="docutils literal notranslate"><span class="pre">Range</span></code> lookup to quickly
retrieve a subset of data from Accumulo.</p>
<p>But what about the other columns? If you’re frequently querying on
non-row ID columns, you should consider using the <strong>indexing</strong>
feature built into the Accumulo connector. This feature can drastically
reduce query runtime when selecting a handful of values from the table,
and the heavy lifting is done for you when loading data via Presto
<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> statements (though, keep in mind writing data to Accumulo via
<code class="docutils literal notranslate"><span class="pre">INSERT</span></code> does not have high throughput).</p>
<p>To enable indexing, add the <code class="docutils literal notranslate"><span class="pre">index_columns</span></code> table property and specify
a comma-delimited list of Presto column names you wish to index (we use the
<code class="docutils literal notranslate"><span class="pre">string</span></code> serializer here to help with this example – you
should be using the default <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code> serializer).</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">index_columns</span><span class="o">=</span><span class="s1">&#39;name,age,birthday&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<p>After creating the table, we see there are an additional two Accumulo
tables to store the index and metrics.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>root@default&gt; tables
accumulo.metadata
accumulo.root
myschema.scientists
myschema.scientists_idx
myschema.scientists_idx_metrics
trace
</code></pre></div>
</div>
<p>After inserting data, we can look at the index table and see there are
indexed values for the name, age, and birthday columns. The connector
queries this index table</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;row1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Grace Hopper&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1906-12-09&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;row2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Alan Turing&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1912-06-23&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>root@default&gt; scan -t myschema.scientists_idx
-21011 metadata_date:row2 []
-23034 metadata_date:row1 []
103 metadata_age:row2 []
109 metadata_age:row1 []
Alan Turing metadata_name:row2 []
Grace Hopper metadata_name:row1 []
</code></pre></div>
</div>
<p>When issuing a query with a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause against indexed columns,
the connector searches the index table for all row IDs that contain the
value within the predicate. These row IDs are bundled into a Presto
split as single-value <code class="docutils literal notranslate"><span class="pre">Range</span></code> objects (the number of row IDs per split
is controlled by the value of <code class="docutils literal notranslate"><span class="pre">accumulo.index_rows_per_split</span></code>) and
passed to a Presto worker to be configured in the <code class="docutils literal notranslate"><span class="pre">BatchScanner</span></code> which
scans the data table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">109</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code> recordkey |     name     | age |  birthday
-----------+--------------+-----+------------
 row1      | Grace Hopper | 109 | 1906-12-09
(1 row)
</code></pre></div>
</div>
<h2 id="loading-data">Loading Data<a class="headerlink" href="#loading-data" title="Link to this heading">¶</a></h2>
<p>The Accumulo connector supports loading data via INSERT statements, however
this method tends to be low-throughput and should not be relied on when throughput
is a concern. Instead, users of the connector should use the <code class="docutils literal notranslate"><span class="pre">PrestoBatchWriter</span></code>
tool that is provided as part of the presto-accumulo-tools subproject in the
<a class="reference external" href="https://github.com/bloomberg/presto-accumulo">presto-accumulo repository</a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">PrestoBatchWriter</span></code> is a wrapper class for the typical <code class="docutils literal notranslate"><span class="pre">BatchWriter</span></code> that
leverages the Presto/Accumulo metadata to write Mutations to the main data table.
In particular, it handles indexing the given mutations on any indexed columns.
Usage of the tool is provided in the README in the <a class="reference external" href="https://github.com/bloomberg/presto-accumulo">repository</a>.</p>
<h2 id="external-tables">External Tables<a class="headerlink" href="#external-tables" title="Link to this heading">¶</a></h2>
<p>By default, the tables created using SQL statements via Presto are
<em>internal</em> tables, that is both the Presto table metadata and the
Accumulo tables are managed by Presto. When you create an internal
table, the Accumulo table is created as well. You will receive an error
if the Accumulo table already exists. When an internal table is dropped
via Presto, the Accumulo table (and any index tables) are dropped as
well.</p>
<p>To change this behavior, set the <code class="docutils literal notranslate"><span class="pre">external</span></code> property to <code class="docutils literal notranslate"><span class="pre">true</span></code> when
issuing the <code class="docutils literal notranslate"><span class="pre">CREATE</span></code> statement. This will make the table an <em>external</em>
table, and a <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span></code> command will <strong>only</strong> delete the metadata
associated with the table.  If the Accumulo tables do not already exist,
they will be created by the connector.</p>
<p>Creating an external table <em>will</em> set any configured locality groups as well
as the iterators on the index and metrics tables (if the table is indexed).
In short, the only difference between an external table and an internal table
is the connector will delete the Accumulo tables when a <code class="docutils literal notranslate"><span class="pre">DROP</span> <span class="pre">TABLE</span></code> command
is issued.</p>
<p>External tables can be a bit more difficult to work with, as the data is stored
in an expected format. If the data is not stored correctly, then you’re
gonna have a bad time. Users must provide a <code class="docutils literal notranslate"><span class="pre">column_mapping</span></code> property
when creating the table. This creates the mapping of Presto column name
to the column family/qualifier for the cell of the table. The value of the
cell is stored in the <code class="docutils literal notranslate"><span class="pre">Value</span></code> of the Accumulo key/value pair. By default,
this value is expected to be serialized using Accumulo’s <em>lexicoder</em> API.
If you are storing values as strings, you can specify a different serializer
using the <code class="docutils literal notranslate"><span class="pre">serializer</span></code> property of the table. See the section on
<a class="reference external" href="#table-properties">Table Properties</a> for more information.</p>
<p>Next, we create the Presto external table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">external_table</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a:md:a,b:md:b,c:md:c&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">external</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">  </span><span class="n">index_columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;b,c&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">locality_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;foo:b,c&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<p>After creating the table, usage of the table continues as usual:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">external_table</span><span class="w"> </span><span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;2015-03-06&#39;</span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;2015-03-07&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">external_table</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code> a | b |     c
---+---+------------
 1 | 1 | 2015-03-06
 2 | 2 | 2015-03-06
(2 rows)
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">external_table</span><span class="p">;</span>
</code></pre></div>
</div>
<p>After dropping the table, the table will still exist in Accumulo because it is <em>external</em>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>root@default&gt; tables
accumulo.metadata
accumulo.root
external_table
external_table_idx
external_table_idx_metrics
trace
</code></pre></div>
</div>
<p>If we wanted to add a new column to the table, we can create the table again and specify a new column.
Any existing rows in the table will have a value of NULL. This command will re-configure the Accumulo
tables, setting the locality groups and iterator configuration.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">external_table</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="w"> </span><span class="nb">DATE</span><span class="p">,</span>
<span class="w">  </span><span class="n">d</span><span class="w"> </span><span class="nb">INTEGER</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a:md:a,b:md:b,c:md:c,d:md:d&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">external</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">,</span>
<span class="w">  </span><span class="n">index_columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;b,c,d&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">locality_groups</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;foo:b,c,d&#39;</span>
<span class="p">);</span>

<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">external_table</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="k">c</span><span class="w">      </span><span class="o">|</span><span class="w">  </span><span class="n">d</span>
<span class="c1">---+---+------------+------</span>
<span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">06</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span>
<span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">2015</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">07</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="k">rows</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="table-properties">Table Properties<a class="headerlink" href="#table-properties" title="Link to this heading">¶</a></h2>
<p>Table property usage example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name:metadata:name,age:metadata:age,birthday:metadata:date&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">index_columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name,age&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">column_mapping</span></code></p></td>
<td><p>(generated)</p></td>
<td><p>Comma-delimited list of column metadata: <code class="docutils literal notranslate"><span class="pre">col_name:col_family:col_qualifier,[...]</span></code>.
Required for external tables.  Not setting this property results in auto-generated column names.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index_columns</span></code></p></td>
<td><p>(none)</p></td>
<td><p>A comma-delimited list of Presto columns that are indexed in this table’s corresponding index table</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">external</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>If true, Presto will only do metadata operations for the table.
Otherwise, Presto will create and drop Accumulo tables where appropriate.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">locality_groups</span></code></p></td>
<td><p>(none)</p></td>
<td><p>List of locality groups to set on the Accumulo table. Only valid on internal tables.
String format is locality group name, colon, comma delimited list of column families in the group.
Groups are delimited by pipes. Example: <code class="docutils literal notranslate"><span class="pre">group1:famA,famB,famC|group2:famD,famE,famF|etc...</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">row_id</span></code></p></td>
<td><p>(first column)</p></td>
<td><p>Presto column name that maps to the Accumulo row ID.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">serializer</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></td>
<td><p>Serializer for Accumulo data encodings. Can either be <code class="docutils literal notranslate"><span class="pre">default</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code>
or a Java class name. Default is <code class="docutils literal notranslate"><span class="pre">default</span></code>,
i.e. the value from <code class="docutils literal notranslate"><span class="pre">AccumuloRowSerializer.getDefault()</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">scan_auths</span></code></p></td>
<td><p>(user auths)</p></td>
<td><p>Scan-time authorizations set on the batch scanner.</p></td>
</tr>
</tbody>
</table>
<h2 id="session-properties">Session Properties<a class="headerlink" href="#session-properties" title="Link to this heading">¶</a></h2>
<p>You can change the default value of a session property by using <a class="reference internal" href="../sql/set-session.html"><span class="doc">SET SESSION</span></a>.
Note that session properties are prefixed with the catalog name:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SET</span><span class="w"> </span><span class="k">SESSION</span><span class="w"> </span><span class="n">accumulo</span><span class="p">.</span><span class="n">column_filter_optimizations_enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
</code></pre></div>
</div>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Default Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">optimize_locality_enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Set to true to enable data locality for non-indexed scans</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">optimize_split_ranges_enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Set to true to split non-indexed queries by tablet splits. Should generally be true.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">optimize_index_enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Set to true to enable usage of the secondary index on query</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index_rows_per_split</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10000</span></code></p></td>
<td><p>The number of Accumulo row IDs that are packed into a single Presto split</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">index_threshold</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.2</span></code></p></td>
<td><p>The ratio between number of rows to be scanned based on the index over the total number of rows
If the ratio is below this threshold, the index will be used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index_lowest_cardinality_threshold</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.01</span></code></p></td>
<td><p>The threshold where the column with the lowest cardinality will be used instead of computing an
intersection of ranges in the index. Secondary index must be enabled</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">index_metrics_enabled</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Set to true to enable usage of the metrics table to optimize usage of the index</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scan_username</span></code></p></td>
<td><p>(config)</p></td>
<td><p>User to impersonate when scanning the tables. This property trumps the <code class="docutils literal notranslate"><span class="pre">scan_auths</span></code> table property</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">index_short_circuit_cardinality_fetch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><p>Short circuit the retrieval of index metrics once any column is less than the lowest cardinality threshold</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">index_cardinality_cache_polling_duration</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10ms</span></code></p></td>
<td><p>Sets the cardinality cache polling duration for short circuit retrieval of index metrics</p></td>
</tr>
</tbody>
</table>
<h2 id="adding-columns">Adding Columns<a class="headerlink" href="#adding-columns" title="Link to this heading">¶</a></h2>
<p>Adding a new column to an existing table cannot be done today via
<code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span> <span class="pre">[table]</span> <span class="pre">ADD</span> <span class="pre">COLUMN</span> <span class="pre">[name]</span> <span class="pre">[type]</span></code> because of the additional
metadata required for the columns to work; the column family, qualifier,
and if the column is indexed.</p>
<p>Instead, you can use one of the utilities in the
<a class="reference external" href="https://github.com/bloomberg/presto-accumulo/tree/master/presto-accumulo-tools">presto-accumulo-tools</a>
sub-project of the <code class="docutils literal notranslate"><span class="pre">presto-accumulo</span></code> repository.  Documentation and usage can be found in the README.</p>
<h2 id="serializers">Serializers<a class="headerlink" href="#serializers" title="Link to this heading">¶</a></h2>
<p>The Presto connector for Accumulo has a pluggable serializer framework
for handling I/O between Presto and Accumulo. This enables end-users the
ability to programmatically serialized and deserialize their special data
formats within Accumulo, while abstracting away the complexity of the
connector itself.</p>
<p>There are two types of serializers currently available; a <code class="docutils literal notranslate"><span class="pre">string</span></code>
serializer that treats values as Java <code class="docutils literal notranslate"><span class="pre">String</span></code> and a <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code>
serializer that leverages Accumulo’s Lexicoder API to store values. The
default serializer is the <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code> serializer, as this serializer
does not require expensive conversion operations back and forth between
<code class="docutils literal notranslate"><span class="pre">String</span></code> objects and the Presto types – the cell’s value is encoded as a
byte array.</p>
<p>Additionally, the <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code> serializer does proper lexigraphical ordering of
numerical types like <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code> or <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>.  This is essential for the connector
to properly leverage the secondary index when querying for data.</p>
<p>You can change the default the serializer by specifying the
<code class="docutils literal notranslate"><span class="pre">serializer</span></code> table property, using either <code class="docutils literal notranslate"><span class="pre">default</span></code> (which is
<code class="docutils literal notranslate"><span class="pre">lexicoder</span></code>), <code class="docutils literal notranslate"><span class="pre">string</span></code> or <code class="docutils literal notranslate"><span class="pre">lexicoder</span></code> for the built-in types, or
you could provide your own implementation by extending
<code class="docutils literal notranslate"><span class="pre">AccumuloRowSerializer</span></code>, adding it to the Presto <code class="docutils literal notranslate"><span class="pre">CLASSPATH</span></code>, and
specifying the fully-qualified Java class name in the connector configuration.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name:metadata:name,age:metadata:age,birthday:metadata:date&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;default&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">scientists</span><span class="w"> </span><span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;row1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Grace Hopper&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1906-12-09&#39;</span><span class="w"> </span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;row2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Alan Turing&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1912-06-23&#39;</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>root@default&gt; scan -t myschema.scientists
row1 metadata:age []    \x08\x80\x00\x00\x00\x00\x00\x00m
row1 metadata:date []    \x08\x7F\xFF\xFF\xFF\xFF\xFF\xA6\x06
row1 metadata:name []    Grace Hopper
row2 metadata:age []    \x08\x80\x00\x00\x00\x00\x00\x00g
row2 metadata:date []    \x08\x7F\xFF\xFF\xFF\xFF\xFF\xAD\xED
row2 metadata:name []    Alan Turing
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">stringy_scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name:metadata:name,age:metadata:age,birthday:metadata:date&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;string&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">INSERT</span><span class="w"> </span><span class="k">INTO</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">stringy_scientists</span><span class="w"> </span><span class="k">VALUES</span>
<span class="p">(</span><span class="s1">&#39;row1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Grace Hopper&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">109</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1906-12-09&#39;</span><span class="w"> </span><span class="p">),</span>
<span class="p">(</span><span class="s1">&#39;row2&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;Alan Turing&#39;</span><span class="p">,</span><span class="w"> </span><span class="mi">103</span><span class="p">,</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;1912-06-23&#39;</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>root@default&gt; scan -t myschema.stringy_scientists
row1 metadata:age []    109
row1 metadata:date []    -23034
row1 metadata:name []    Grace Hopper
row2 metadata:age []    103
row2 metadata:date []    -21011
row2 metadata:name []    Alan Turing
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">myschema</span><span class="p">.</span><span class="n">custom_scientists</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">recordkey</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">age</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="n">birthday</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;name:metadata:name,age:metadata:age,birthday:metadata:date&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">serializer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;my.serializer.package.MySerializer&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<h2 id="metadata-management">Metadata Management<a class="headerlink" href="#metadata-management" title="Link to this heading">¶</a></h2>
<p>Metadata for the Presto/Accumulo tables is stored in ZooKeeper. You can
(and should) issue SQL statements in Presto to create and drop tables.
This is the easiest method of creating the metadata required to make the
connector work. It is best to not mess with the metadata, but here are
the details of how it is stored. Information is power.</p>
<p>A root node in ZooKeeper holds all the mappings, and the format is as
follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>/metadata-root/schema/table
</code></pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">metadata-root</span></code> is the value of <code class="docutils literal notranslate"><span class="pre">zookeeper.metadata.root</span></code> in
the config file (default is <code class="docutils literal notranslate"><span class="pre">/presto-accumulo</span></code>), <code class="docutils literal notranslate"><span class="pre">schema</span></code> is the
Presto schema (which is identical to the Accumulo namespace name), and
<code class="docutils literal notranslate"><span class="pre">table</span></code> is the Presto table name (again, identical to Accumulo name).
The data of the <code class="docutils literal notranslate"><span class="pre">table</span></code> ZooKeeper node is a serialized
<code class="docutils literal notranslate"><span class="pre">AccumuloTable</span></code> Java object (which resides in the connector code).
This table contains the schema (namespace) name, table name, column
definitions, the serializer to use for the table, and any additional
table properties.</p>
<p>If you have a need to programmatically manipulate the ZooKeeper metadata
for Accumulo, take a look at
<code class="docutils literal notranslate"><span class="pre">com.facebook.presto.accumulo.metadata.ZooKeeperMetadataManager</span></code> for some
Java code to simplify the process.</p>
<h2 id="converting-table-from-internal-to-external">Converting Table from Internal to External<a class="headerlink" href="#converting-table-from-internal-to-external" title="Link to this heading">¶</a></h2>
<p>If your table is <em>internal</em>, you can convert it to an external table by deleting
the corresponding znode in ZooKeeper, effectively making the table no longer exist as
far as Presto is concerned.  Then, create the table again using the same DDL, but adding the
<code class="docutils literal notranslate"><span class="pre">external</span> <span class="pre">=</span> <span class="pre">true</span></code> table property.</p>
<p>For example:</p>
<p>1. We’re starting with an internal table <code class="docutils literal notranslate"><span class="pre">foo.bar</span></code> that was created with the below DDL.
If you have not previously defined a table property for <code class="docutils literal notranslate"><span class="pre">column_mapping</span></code> (like this example),
be sure to describe the table <strong>before</strong> deleting the metadata.  We’ll need the column mappings
when creating the external table.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="nb">DATE</span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">index_columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;b,c&#39;</span>
<span class="p">);</span>
</code></pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DESCRIBE</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="p">;</span>
</code></pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code> Column |  Type   | Extra |               Comment
--------+---------+-------+-------------------------------------
 a      | varchar |       | Accumulo row ID
 b      | bigint  |       | Accumulo column b:b. Indexed: true
 c      | date    |       | Accumulo column c:c. Indexed: true
</code></pre></div>
</div>
<p>2. Using the ZooKeeper CLI, delete the corresponding znode.  Note this uses the default ZooKeeper
metadata root of <code class="docutils literal notranslate"><span class="pre">/presto-accumulo</span></code></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>$ zkCli.sh
[zk: localhost:2181(CONNECTED) 1] delete /presto-accumulo/foo/bar
</code></pre></div>
</div>
<p>3. Re-create the table using the same DDL as before, but adding the <code class="docutils literal notranslate"><span class="pre">external=true</span></code> property.
Note that if you had not previously defined the column_mapping, you’ll need to add the property
to the new DDL (external tables require this property to be set).  The column mappings are in
the output of the <code class="docutils literal notranslate"><span class="pre">DESCRIBE</span></code> statement.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">bar</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">,</span>
<span class="w">  </span><span class="n">b</span><span class="w"> </span><span class="nb">BIGINT</span><span class="p">,</span>
<span class="w">  </span><span class="k">c</span><span class="w"> </span><span class="nb">DATE</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">column_mapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a:a:a,b:b:b,c:c:c&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">index_columns</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;b,c&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="k">external</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span>
<span class="p">);</span>
</code></pre></div>
</div>



  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../connector.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Connectors" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Connectors
            </div>
          </div>
        </a>
      
      
        
        <a href="bigquery.html" class="md-footer__link md-footer__link--next" aria-label="Next: BigQuery Connector" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              BigQuery Connector
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright The Presto Foundation. All rights reserved. Presto is a registered trademark of LF Projects, LLC.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/prestodb/presto" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.follow", "toc.sticky"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    
  </body>
</html>