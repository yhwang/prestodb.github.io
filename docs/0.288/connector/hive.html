

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Hive Connector - Presto 0.288 Documentation</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.359ec555e2989f00f.min.css?v=b000af5c" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-K7GB6F0LBZ"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-K7GB6F0LBZ",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-K7GB6F0LBZ",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Presto 0.288 Documentation" class="md-header__button md-logo" aria-label="Presto 0.288 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Presto 0.288 Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Hive Connector
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Presto 0.288 Documentation" class="md-nav__button md-logo" aria-label="Presto 0.288 Documentation" data-md-component="logo">
      <img src="../_static/logo.png" alt="logo">
    </a>
    Presto 0.288 Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/prestodb/presto" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Presto
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../clients.html" class="md-nav__link">
        <span class="md-ellipsis">Presto Clients</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../security.html" class="md-nav__link">
        <span class="md-ellipsis">Security</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../admin.html" class="md-nav__link">
        <span class="md-ellipsis">Administration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../cache.html" class="md-nav__link">
        <span class="md-ellipsis">Cache</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer.html" class="md-nav__link">
        <span class="md-ellipsis">Query Optimizer</span>
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../connector.html"><span class="md-ellipsis">Connectors</span></a>
          
            <label for="__nav_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Connectors" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Connectors</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="accumulo.html" class="md-nav__link">
        <span class="md-ellipsis">Accumulo Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="bigquery.html" class="md-nav__link">
        <span class="md-ellipsis">Big<wbr>Query Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="blackhole.html" class="md-nav__link">
        <span class="md-ellipsis">Black Hole Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="cassandra.html" class="md-nav__link">
        <span class="md-ellipsis">Cassandra Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="clickhouse.html" class="md-nav__link">
        <span class="md-ellipsis">Click<wbr>House connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="deltalake.html" class="md-nav__link">
        <span class="md-ellipsis">Delta Lake Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="druid.html" class="md-nav__link">
        <span class="md-ellipsis">Druid Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="elasticsearch.html" class="md-nav__link">
        <span class="md-ellipsis">Elasticsearch Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="googlesheets.html" class="md-nav__link">
        <span class="md-ellipsis">Google Sheets connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hana.html" class="md-nav__link">
        <span class="md-ellipsis">HANA Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Hive Connector</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Hive Connector</span>
      </a>
      
        

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/hive.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/connector/hive.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#supported-file-types" class="md-nav__link">
    <span class="md-ellipsis">Supported File Types</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-hive-clusters" class="md-nav__link">
    <span class="md-ellipsis">Multiple Hive Clusters</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdfs-configuration" class="md-nav__link">
    <span class="md-ellipsis">HDFS Configuration</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdfs-username" class="md-nav__link">
    <span class="md-ellipsis">HDFS Username</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-hadoop-clusters-protected-with-kerberos-authentication" class="md-nav__link">
    <span class="md-ellipsis">Accessing Hadoop clusters protected with Kerberos authentication</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#hive-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">Hive Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#metastore-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">Metastore Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#aws-glue-catalog-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">AWS Glue Catalog Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#amazon-s3-configuration" class="md-nav__link">
    <span class="md-ellipsis">Amazon S3 Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Amazon S3 Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#s3-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">S3 Configuration Properties</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-credentials" class="md-nav__link">
    <span class="md-ellipsis">S3 Credentials</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-s3-credentials-provider" class="md-nav__link">
    <span class="md-ellipsis">Custom S3 Credentials Provider</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-security-mapping" class="md-nav__link">
    <span class="md-ellipsis">AWS Security Mapping</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-properties" class="md-nav__link">
    <span class="md-ellipsis">Tuning Properties</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-data-encryption" class="md-nav__link">
    <span class="md-ellipsis">S3 Data Encryption</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id1" class="md-nav__link">
    <span class="md-ellipsis">S3Select<wbr>Pushdown</span>
  </a>
  
    <nav class="md-nav" aria-label="S3SelectPushdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-s3-select-a-good-fit-for-my-workload" class="md-nav__link">
    <span class="md-ellipsis">Is S3 Select a good fit for my workload?</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-and-limitations" class="md-nav__link">
    <span class="md-ellipsis">Considerations and Limitations</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-s3-select-pushdown" class="md-nav__link">
    <span class="md-ellipsis">Enabling S3 Select Pushdown</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-and-tuning-the-maximum-connections" class="md-nav__link">
    <span class="md-ellipsis">Understanding and Tuning the Maximum Connections</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#alluxio-configuration" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Alluxio Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alluxio-client-side-configuration" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Client-<wbr>Side Configuration</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-alluxio-with-presto" class="md-nav__link">
    <span class="md-ellipsis">Deploy Alluxio with Presto</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alluxio-catalog-service" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Catalog Service</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#table-statistics" class="md-nav__link">
    <span class="md-ellipsis">Table Statistics</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#collecting-table-and-column-statistics" class="md-nav__link">
    <span class="md-ellipsis">Collecting table and column statistics</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#quick-stats" class="md-nav__link">
    <span class="md-ellipsis">Quick Stats</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#schema-evolution" class="md-nav__link">
    <span class="md-ellipsis">Schema Evolution</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#avro-schema-evolution" class="md-nav__link">
    <span class="md-ellipsis">Avro Schema Evolution</span>
  </a>
  
    <nav class="md-nav" aria-label="Avro Schema Evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">Limitations</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#parquet-writer-version" class="md-nav__link">
    <span class="md-ellipsis">Parquet Writer Version</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    <span class="md-ellipsis">Procedures</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#extra-hidden-columns" class="md-nav__link">
    <span class="md-ellipsis">Extra Hidden Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#how-to-invalidate-metastore-cache" class="md-nav__link">
    <span class="md-ellipsis">How to invalidate metastore cache?</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#how-to-invalidate-directory-list-cache" class="md-nav__link">
    <span class="md-ellipsis">How to invalidate directory list cache?</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">Examples</span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-schema" class="md-nav__link">
    <span class="md-ellipsis">Create a schema</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-managed-table" class="md-nav__link">
    <span class="md-ellipsis">Create a managed table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-a-partition" class="md-nav__link">
    <span class="md-ellipsis">Drop a partition</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-an-empty-partition" class="md-nav__link">
    <span class="md-ellipsis">Add an empty partition</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-a-table" class="md-nav__link">
    <span class="md-ellipsis">Query a table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-partitions" class="md-nav__link">
    <span class="md-ellipsis">List partitions</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-external-table" class="md-nav__link">
    <span class="md-ellipsis">Create an external table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-external-table" class="md-nav__link">
    <span class="md-ellipsis">Drop external table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-schema" class="md-nav__link">
    <span class="md-ellipsis">Drop schema</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#hive-connector-limitations" class="md-nav__link">
    <span class="md-ellipsis">Hive Connector Limitations</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hive-security.html" class="md-nav__link">
        <span class="md-ellipsis">Hive Security Configuration</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="hudi.html" class="md-nav__link">
        <span class="md-ellipsis">Hudi Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="iceberg.html" class="md-nav__link">
        <span class="md-ellipsis">Iceberg Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="jmx.html" class="md-nav__link">
        <span class="md-ellipsis">JMX Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kafka.html" class="md-nav__link">
        <span class="md-ellipsis">Kafka Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kafka-tutorial.html" class="md-nav__link">
        <span class="md-ellipsis">Kafka Connector Tutorial</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kudu.html" class="md-nav__link">
        <span class="md-ellipsis">Kudu Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="larksheets.html" class="md-nav__link">
        <span class="md-ellipsis">Lark Sheets connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="localfile.html" class="md-nav__link">
        <span class="md-ellipsis">Local File Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="memory.html" class="md-nav__link">
        <span class="md-ellipsis">Memory Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mongodb.html" class="md-nav__link">
        <span class="md-ellipsis">Mongo<wbr>DB Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mysql.html" class="md-nav__link">
        <span class="md-ellipsis">My<wbr>SQL Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="oracle.html" class="md-nav__link">
        <span class="md-ellipsis">Oracle Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="pinot.html" class="md-nav__link">
        <span class="md-ellipsis">Apache Pinot Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="postgresql.html" class="md-nav__link">
        <span class="md-ellipsis">Postgre<wbr>SQL Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="prometheus.html" class="md-nav__link">
        <span class="md-ellipsis">Prometheus Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="redis.html" class="md-nav__link">
        <span class="md-ellipsis">Redis Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="redshift.html" class="md-nav__link">
        <span class="md-ellipsis">Redshift Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="scylladb.html" class="md-nav__link">
        <span class="md-ellipsis">Scylla<wbr>DB Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="singlestore.html" class="md-nav__link">
        <span class="md-ellipsis">Single<wbr>Store Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="sqlserver.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Server Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="system.html" class="md-nav__link">
        <span class="md-ellipsis">System Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="thrift.html" class="md-nav__link">
        <span class="md-ellipsis">Thrift Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tpcds.html" class="md-nav__link">
        <span class="md-ellipsis">TPCDS Connector</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tpch.html" class="md-nav__link">
        <span class="md-ellipsis">TPCH Connector</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin.html" class="md-nav__link">
        <span class="md-ellipsis">Plugins</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../functions.html" class="md-nav__link">
        <span class="md-ellipsis">Functions and Operators</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../language.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Language</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../sql.html" class="md-nav__link">
        <span class="md-ellipsis">SQL Statement Syntax</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../migration.html" class="md-nav__link">
        <span class="md-ellipsis">Migration</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../rest.html" class="md-nav__link">
        <span class="md-ellipsis">REST API</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../ecosystem.html" class="md-nav__link">
        <span class="md-ellipsis">Ecosystem</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../router.html" class="md-nav__link">
        <span class="md-ellipsis">Router</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../develop.html" class="md-nav__link">
        <span class="md-ellipsis">Developer Guide</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../presto-cpp.html" class="md-nav__link">
        <span class="md-ellipsis">Presto C++</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../release.html" class="md-nav__link">
        <span class="md-ellipsis">Release Notes</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary">
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/hive.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
                </span>
                View Page Source
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/edit/master/presto-docs/src/main/sphinx/connector/hive.rst" class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 2c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-1.9l10-10V8l-6-6H6m7 1.5L18.5 9H13V3.5m7.1 9.5c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-2 1.8L12 20.9V23h2.1l6.1-6.1-2.1-2.1Z"/></svg>
                </span>
                Edit this page
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new?title=Documentation&labels=docs"
                class="">
                <span class="md-source__icon md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create docs issue
            </a>
        </li>
        <li class="md-nav__item">
            <a href="https://github.com/prestodb/presto/issues/new" class="">
                <span class="md-source__icon  md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M40 48c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24V72c0-13.3-10.7-24-24-24H40zm152 16c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32h288c17.7 0 32-14.3 32-32s-14.3-32-32-32H192zM16 232v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40c-13.3 0-24 10.7-24 24zm24 136c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24H40z"/></svg>
                </span>
                Create project issue
            </a>
        </li>
    </ul>
    <hr>
    
    
    
    <label class="md-nav__title" for="__toc">
        <span class="md-nav__icon md-icon"></span>
        Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
        
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#supported-file-types" class="md-nav__link">
    <span class="md-ellipsis">Supported File Types</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#multiple-hive-clusters" class="md-nav__link">
    <span class="md-ellipsis">Multiple Hive Clusters</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdfs-configuration" class="md-nav__link">
    <span class="md-ellipsis">HDFS Configuration</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hdfs-username" class="md-nav__link">
    <span class="md-ellipsis">HDFS Username</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#accessing-hadoop-clusters-protected-with-kerberos-authentication" class="md-nav__link">
    <span class="md-ellipsis">Accessing Hadoop clusters protected with Kerberos authentication</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#hive-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">Hive Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#metastore-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">Metastore Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#aws-glue-catalog-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">AWS Glue Catalog Configuration Properties</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#amazon-s3-configuration" class="md-nav__link">
    <span class="md-ellipsis">Amazon S3 Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Amazon S3 Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#s3-configuration-properties" class="md-nav__link">
    <span class="md-ellipsis">S3 Configuration Properties</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-credentials" class="md-nav__link">
    <span class="md-ellipsis">S3 Credentials</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-s3-credentials-provider" class="md-nav__link">
    <span class="md-ellipsis">Custom S3 Credentials Provider</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aws-security-mapping" class="md-nav__link">
    <span class="md-ellipsis">AWS Security Mapping</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tuning-properties" class="md-nav__link">
    <span class="md-ellipsis">Tuning Properties</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s3-data-encryption" class="md-nav__link">
    <span class="md-ellipsis">S3 Data Encryption</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#id1" class="md-nav__link">
    <span class="md-ellipsis">S3Select<wbr>Pushdown</span>
  </a>
  
    <nav class="md-nav" aria-label="S3SelectPushdown">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#is-s3-select-a-good-fit-for-my-workload" class="md-nav__link">
    <span class="md-ellipsis">Is S3 Select a good fit for my workload?</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-and-limitations" class="md-nav__link">
    <span class="md-ellipsis">Considerations and Limitations</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-s3-select-pushdown" class="md-nav__link">
    <span class="md-ellipsis">Enabling S3 Select Pushdown</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#understanding-and-tuning-the-maximum-connections" class="md-nav__link">
    <span class="md-ellipsis">Understanding and Tuning the Maximum Connections</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#alluxio-configuration" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Alluxio Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#alluxio-client-side-configuration" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Client-<wbr>Side Configuration</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-alluxio-with-presto" class="md-nav__link">
    <span class="md-ellipsis">Deploy Alluxio with Presto</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#alluxio-catalog-service" class="md-nav__link">
    <span class="md-ellipsis">Alluxio Catalog Service</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#table-statistics" class="md-nav__link">
    <span class="md-ellipsis">Table Statistics</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#collecting-table-and-column-statistics" class="md-nav__link">
    <span class="md-ellipsis">Collecting table and column statistics</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#quick-stats" class="md-nav__link">
    <span class="md-ellipsis">Quick Stats</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#schema-evolution" class="md-nav__link">
    <span class="md-ellipsis">Schema Evolution</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#avro-schema-evolution" class="md-nav__link">
    <span class="md-ellipsis">Avro Schema Evolution</span>
  </a>
  
    <nav class="md-nav" aria-label="Avro Schema Evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    <span class="md-ellipsis">Limitations</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#parquet-writer-version" class="md-nav__link">
    <span class="md-ellipsis">Parquet Writer Version</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#procedures" class="md-nav__link">
    <span class="md-ellipsis">Procedures</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#extra-hidden-columns" class="md-nav__link">
    <span class="md-ellipsis">Extra Hidden Columns</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#how-to-invalidate-metastore-cache" class="md-nav__link">
    <span class="md-ellipsis">How to invalidate metastore cache?</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#how-to-invalidate-directory-list-cache" class="md-nav__link">
    <span class="md-ellipsis">How to invalidate directory list cache?</span>
  </a>
  
</li>
        
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">Examples</span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-schema" class="md-nav__link">
    <span class="md-ellipsis">Create a schema</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-managed-table" class="md-nav__link">
    <span class="md-ellipsis">Create a managed table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-a-partition" class="md-nav__link">
    <span class="md-ellipsis">Drop a partition</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add-an-empty-partition" class="md-nav__link">
    <span class="md-ellipsis">Add an empty partition</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-a-table" class="md-nav__link">
    <span class="md-ellipsis">Query a table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list-partitions" class="md-nav__link">
    <span class="md-ellipsis">List partitions</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-an-external-table" class="md-nav__link">
    <span class="md-ellipsis">Create an external table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-external-table" class="md-nav__link">
    <span class="md-ellipsis">Drop external table</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#drop-schema" class="md-nav__link">
    <span class="md-ellipsis">Drop schema</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
        <li class="md-nav__item">
  <a href="#hive-connector-limitations" class="md-nav__link">
    <span class="md-ellipsis">Hive Connector Limitations</span>
  </a>
  
</li>
        
    </ul>
    
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/prestodb/presto/blob/master/presto-docs/src/main/sphinx/connector/hive.rst" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>

<h1 id="hive-connector">Hive Connector<a class="headerlink" href="#hive-connector" title="Link to this heading"></a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p></li>
<li><p><a class="reference internal" href="#supported-file-types" id="id4">Supported File Types</a></p></li>
<li><p><a class="reference internal" href="#configuration" id="id5">Configuration</a></p></li>
<li><p><a class="reference internal" href="#hive-configuration-properties" id="id6">Hive Configuration Properties</a></p></li>
<li><p><a class="reference internal" href="#metastore-configuration-properties" id="id7">Metastore Configuration Properties</a></p></li>
<li><p><a class="reference internal" href="#aws-glue-catalog-configuration-properties" id="id8">AWS Glue Catalog Configuration Properties</a></p></li>
<li><p><a class="reference internal" href="#amazon-s3-configuration" id="id9">Amazon S3 Configuration</a></p></li>
<li><p><a class="reference internal" href="#alluxio-configuration" id="id10">Alluxio Configuration</a></p></li>
<li><p><a class="reference internal" href="#table-statistics" id="id11">Table Statistics</a></p></li>
<li><p><a class="reference internal" href="#collecting-table-and-column-statistics" id="id12">Collecting table and column statistics</a></p></li>
<li><p><a class="reference internal" href="#quick-stats" id="id13">Quick Stats</a></p></li>
<li><p><a class="reference internal" href="#schema-evolution" id="id14">Schema Evolution</a></p></li>
<li><p><a class="reference internal" href="#avro-schema-evolution" id="id15">Avro Schema Evolution</a></p></li>
<li><p><a class="reference internal" href="#parquet-writer-version" id="id16">Parquet Writer Version</a></p></li>
<li><p><a class="reference internal" href="#procedures" id="id17">Procedures</a></p></li>
<li><p><a class="reference internal" href="#extra-hidden-columns" id="id18">Extra Hidden Columns</a></p></li>
<li><p><a class="reference internal" href="#how-to-invalidate-metastore-cache" id="id19">How to invalidate metastore cache?</a></p></li>
<li><p><a class="reference internal" href="#how-to-invalidate-directory-list-cache" id="id20">How to invalidate directory list cache?</a></p></li>
<li><p><a class="reference internal" href="#examples" id="id21">Examples</a></p></li>
<li><p><a class="reference internal" href="#hive-connector-limitations" id="id22">Hive Connector Limitations</a></p></li>
</ul>
</nav>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The Hive connector allows querying data stored in a Hive
data warehouse. Hive is a combination of three components:</p>
<ul class="simple">
<li><p>Data files in varying formats that are typically stored in the
Hadoop Distributed File System (HDFS) or in Amazon S3.</p></li>
<li><p>Metadata about how the data files are mapped to schemas and tables.
This metadata is stored in a database such as MySQL and is accessed
via the Hive metastore service.</p></li>
<li><p>A query language called HiveQL. This query language is executed
on a distributed computing framework such as MapReduce or Tez.</p></li>
</ul>
<p>Presto only uses the first two components: the data and the metadata.
It does not use HiveQL or any part of Hives execution environment.</p>
<h2 id="supported-file-types">Supported File Types<a class="headerlink" href="#supported-file-types" title="Link to this heading"></a></h2>
<p>The following file types are supported for the Hive connector:</p>
<ul class="simple">
<li><p>ORC</p></li>
<li><p>Parquet</p></li>
<li><p>Avro</p></li>
<li><p>RCFile</p></li>
<li><p>SequenceFile</p></li>
<li><p>JSON</p></li>
<li><p>Text</p></li>
</ul>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<p>The Hive connector supports Apache Hadoop 2.x and derivative distributions
including Cloudera CDH 5 and Hortonworks Data Platform (HDP).</p>
<p>Create <code class="docutils literal notranslate"><span class="pre">etc/catalog/hive.properties</span></code> with the following contents
to mount the <code class="docutils literal notranslate"><span class="pre">hive-hadoop2</span></code> connector as the <code class="docutils literal notranslate"><span class="pre">hive</span></code> catalog,
replacing <code class="docutils literal notranslate"><span class="pre">example.net:9083</span></code> with the correct host and port
for your Hive metastore Thrift service:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>connector.name=hive-hadoop2
hive.metastore.uri=thrift://example.net:9083
</code></pre></div>
</div>
<h3 id="multiple-hive-clusters">Multiple Hive Clusters<a class="headerlink" href="#multiple-hive-clusters" title="Link to this heading"></a></h3>
<p>You can have as many catalogs as you need, so if you have additional
Hive clusters, simply add another properties file to <code class="docutils literal notranslate"><span class="pre">etc/catalog</span></code>
with a different name (making sure it ends in <code class="docutils literal notranslate"><span class="pre">.properties</span></code>). For
example, if you name the property file <code class="docutils literal notranslate"><span class="pre">sales.properties</span></code>, Presto
will create a catalog named <code class="docutils literal notranslate"><span class="pre">sales</span></code> using the configured connector.</p>
<h3 id="hdfs-configuration">HDFS Configuration<a class="headerlink" href="#hdfs-configuration" title="Link to this heading"></a></h3>
<p>For basic setups, Presto configures the HDFS client automatically and
does not require any configuration files. In some cases, such as when using
federated HDFS or NameNode high availability, it is necessary to specify
additional HDFS client options in order to access your HDFS cluster. To do so,
add the <code class="docutils literal notranslate"><span class="pre">hive.config.resources</span></code> property to reference your HDFS config files:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>hive.config.resources=/etc/hadoop/conf/core-site.xml,/etc/hadoop/conf/hdfs-site.xml
</code></pre></div>
</div>
<p>Only specify additional configuration files if necessary for your setup.
We also recommend reducing the configuration files to have the minimum
set of required properties, as additional properties may cause problems.</p>
<p>The configuration files must exist on all Presto nodes. If you are
referencing existing Hadoop config files, make sure to copy them to
any Presto nodes that are not running Hadoop.</p>
<h3 id="hdfs-username">HDFS Username<a class="headerlink" href="#hdfs-username" title="Link to this heading"></a></h3>
<p>When not using Kerberos with HDFS, Presto will access HDFS using the
OS user of the Presto process. For example, if Presto is running as
<code class="docutils literal notranslate"><span class="pre">nobody</span></code>, it will access HDFS as <code class="docutils literal notranslate"><span class="pre">nobody</span></code>. You can override this
username by setting the <code class="docutils literal notranslate"><span class="pre">HADOOP_USER_NAME</span></code> system property in the
Presto <a class="reference internal" href="../installation/deployment.html#presto-jvm-config"><span class="std std-ref">JVM Config</span></a>, replacing <code class="docutils literal notranslate"><span class="pre">hdfs_user</span></code> with the
appropriate username:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>-DHADOOP_USER_NAME=hdfs_user
</code></pre></div>
</div>
<h3 id="accessing-hadoop-clusters-protected-with-kerberos-authentication">Accessing Hadoop clusters protected with Kerberos authentication<a class="headerlink" href="#accessing-hadoop-clusters-protected-with-kerberos-authentication" title="Link to this heading"></a></h3>
<p>Kerberos authentication is supported for both HDFS and the Hive metastore.
However, Kerberos authentication by ticket cache is not yet supported.</p>
<p>The properties that apply to Hive connector security are listed in the
<a class="reference internal" href="#hive-configuration-properties">Hive Configuration Properties</a> table. Please see the
<a class="reference internal" href="hive-security.html"><span class="doc">Hive Security Configuration</span></a> section for a more detailed discussion of the
security options in the Hive connector.</p>
<h2 id="hive-configuration-properties">Hive Configuration Properties<a class="headerlink" href="#hive-configuration-properties" title="Link to this heading"></a></h2>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.uri</span></code></p></td>
<td><p>The URI(s) of the Hive metastore to connect to using the
Thrift protocol. If multiple URIs are provided, the first
URI is used by default and the rest of the URIs are
fallback metastores. This property is required.
Example: <code class="docutils literal notranslate"><span class="pre">thrift://192.0.2.3:9083</span></code> or
<code class="docutils literal notranslate"><span class="pre">thrift://192.0.2.3:9083,thrift://192.0.2.4:9083</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.username</span></code></p></td>
<td><p>The username Presto will use to access the Hive metastore.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.config.resources</span></code></p></td>
<td><p>An optional comma-separated list of HDFS
configuration files. These files must exist on the
machines running Presto. Only specify this if
absolutely necessary to access HDFS.
Example: <code class="docutils literal notranslate"><span class="pre">/etc/hdfs-site.xml</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.storage-format</span></code></p></td>
<td><p>The default file format used when creating new tables.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ORC</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.compression-codec</span></code></p></td>
<td><p>The compression codec to use when writing files.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">GZIP</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.force-local-scheduling</span></code></p></td>
<td><p>Force splits to be scheduled on the same node as the Hadoop
DataNode process serving the split data.  This is useful for
installations where Presto is collocated with every
DataNode.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.order-based-execution-enabled</span></code></p></td>
<td><p>Enable order-based execution. When its enabled, hive files
become non-splittable and the table ordering properties
would be exposed to plan optimizer</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.respect-table-format</span></code></p></td>
<td><p>Should new partitions be written using the existing table
format or the default Presto format?</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.immutable-partitions</span></code></p></td>
<td><p>Can new data be inserted into existing partitions?</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.create-empty-bucket-files</span></code></p></td>
<td><p>Should empty files be created for buckets that have no data?</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.max-partitions-per-writers</span></code></p></td>
<td><p>Maximum number of partitions per writer.</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.max-partitions-per-scan</span></code></p></td>
<td><p>Maximum number of partitions for a single table scan.</p></td>
<td><p>100,000</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.dynamic-split-sizes-enabled</span></code></p></td>
<td><p>Enable dynamic sizing of splits based on data scanned by
the query.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.authentication.type</span></code></p></td>
<td><p>Hive metastore authentication type.
Possible values are <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.service.principal</span></code></p></td>
<td><p>The Kerberos principal of the Hive metastore service.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.principal</span></code></p></td>
<td><p>The Kerberos principal that Presto will use when connecting
to the Hive metastore service.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.client.keytab</span></code></p></td>
<td><p>Hive metastore client keytab location.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.authentication.type</span></code></p></td>
<td><p>HDFS authentication type.
Possible values are <code class="docutils literal notranslate"><span class="pre">NONE</span></code> or <code class="docutils literal notranslate"><span class="pre">KERBEROS</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.impersonation.enabled</span></code></p></td>
<td><p>Enable HDFS end user impersonation.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.principal</span></code></p></td>
<td><p>The Kerberos principal that Presto will use when connecting
to HDFS.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.hdfs.presto.keytab</span></code></p></td>
<td><p>HDFS client keytab location.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.security</span></code></p></td>
<td><p>See <a class="reference internal" href="hive-security.html"><span class="doc">Hive Security Configuration</span></a>.</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">security.config-file</span></code></p></td>
<td><p>Path of config file to use when <code class="docutils literal notranslate"><span class="pre">hive.security=file</span></code>.
See <a class="reference internal" href="hive-security.html#hive-file-based-authorization"><span class="std std-ref">File Based Authorization</span></a> for details.</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.non-managed-table-writes-enabled</span></code></p></td>
<td><p>Enable writes to non-managed (external) Hive tables.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.non-managed-table-creates-enabled</span></code></p></td>
<td><p>Enable creating non-managed (external) Hive tables.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.collect-column-statistics-on-write</span></code></p></td>
<td><p>Enables automatic column level statistics collection
on write. See <a class="reference external" href="#table-statistics">Table Statistics</a> for
details.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3select-pushdown.enabled</span></code></p></td>
<td><p>Enable query pushdown to AWS S3 Select service.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3select-pushdown.max-connections</span></code></p></td>
<td><p>Maximum number of simultaneously open connections to S3 for
S3SelectPushdown.</p></td>
<td><p>500</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.load-balancing-enabled</span></code></p></td>
<td><p>Enable load balancing between multiple Metastore instances</p></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="metastore-configuration-properties">Metastore Configuration Properties<a class="headerlink" href="#metastore-configuration-properties" title="Link to this heading"></a></h2>
<p>The required Hive metastore can be configured with a number of properties.</p>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore-timeout</span></code></p></td>
<td><p>Timeout for Hive metastore requests.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore-cache-ttl</span></code></p></td>
<td><p>Duration how long cached metastore data should be considered
valid.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore-cache-maximum-size</span></code></p></td>
<td><p>Hive metastore cache maximum size.</p></td>
<td><p>10000</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore-refresh-interval</span></code></p></td>
<td><p>Asynchronously refresh cached metastore data after access
if it is older than this but is not yet expired, allowing
subsequent accesses to see fresh data.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore-refresh-max-threads</span></code></p></td>
<td><p>Maximum threads used to refresh cached metastore data.</p></td>
<td><p>100</p></td>
</tr>
</tbody>
</table>
<h2 id="aws-glue-catalog-configuration-properties">AWS Glue Catalog Configuration Properties<a class="headerlink" href="#aws-glue-catalog-configuration-properties" title="Link to this heading"></a></h2>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.region</span></code></p></td>
<td><p>AWS region of the Glue Catalog. This is required when not
running in EC2, or when the catalog is in a different region.
Example: <code class="docutils literal notranslate"><span class="pre">us-east-1</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.pin-client-to-current-region</span></code></p></td>
<td><p>Pin Glue requests to the same region as the EC2 instance
where Presto is running (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.max-connections</span></code></p></td>
<td><p>Max number of concurrent connections to Glue
(defaults to <code class="docutils literal notranslate"><span class="pre">5</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.max-error-retries</span></code></p></td>
<td><p>Maximum number of error retries for the Glue client,
defaults to <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.default-warehouse-dir</span></code></p></td>
<td><p>Hive Glue metastore default warehouse directory</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.aws-access-key</span></code></p></td>
<td><p>AWS access key to use to connect to the Glue Catalog. If
specified along with <code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.aws-secret-key</span></code>,
this parameter takes precedence over
<code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.iam-role</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.aws-secret-key</span></code></p></td>
<td><p>AWS secret key to use to connect to the Glue Catalog. If
specified along with <code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.aws-access-key</span></code>,
this parameter takes precedence over
<code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.iam-role</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.catalogid</span></code></p></td>
<td><p>The ID of the Glue Catalog in which the metadata database
resides.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.endpoint-url</span></code></p></td>
<td><p>Glue API endpoint URL (optional).
Example: <code class="docutils literal notranslate"><span class="pre">https://glue.us-east-1.amazonaws.com</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.partitions-segments</span></code></p></td>
<td><p>Number of segments for partitioned Glue tables.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.get-partition-threads</span></code></p></td>
<td><p>Number of threads for parallel partition fetches from Glue.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.metastore.glue.iam-role</span></code></p></td>
<td><p>ARN of an IAM role to assume when connecting to the Glue
Catalog.</p></td>
</tr>
</tbody>
</table>
<h2 id="amazon-s3-configuration"><span id="s3selectpushdown"></span>Amazon S3 Configuration<a class="headerlink" href="#amazon-s3-configuration" title="Link to this heading"></a></h2>
<p>The Hive Connector can read and write tables that are stored in S3.
This is accomplished by having a table or database location that
uses an S3 prefix rather than an HDFS prefix.</p>
<p>Presto uses its own S3 filesystem for the URI prefixes
<code class="docutils literal notranslate"><span class="pre">s3://</span></code>, <code class="docutils literal notranslate"><span class="pre">s3n://</span></code> and  <code class="docutils literal notranslate"><span class="pre">s3a://</span></code>.</p>
<h3 id="s3-configuration-properties">S3 Configuration Properties<a class="headerlink" href="#s3-configuration-properties" title="Link to this heading"></a></h3>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.use-instance-credentials</span></code></p></td>
<td><p>Use the EC2 metadata service to retrieve API credentials
(defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>). This works with IAM roles in EC2.</p>
<blockquote>
<div><p><strong>Note:</strong> This property is deprecated.</p>
</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.aws-access-key</span></code></p></td>
<td><p>Default AWS access key to use.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.aws-secret-key</span></code></p></td>
<td><p>Default AWS secret key to use.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.iam-role</span></code></p></td>
<td><p>IAM role to assume.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.endpoint</span></code></p></td>
<td><p>The S3 storage endpoint server. This can be used to
connect to an S3-compatible storage system instead
of AWS. When using v4 signatures, it is recommended to
set this to the AWS region-specific endpoint
(e.g., <code class="docutils literal notranslate"><span class="pre">http[s]://&lt;bucket&gt;.s3-&lt;AWS-region&gt;.amazonaws.com</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.storage-class</span></code></p></td>
<td><p>The S3 storage class to use when writing the data. Currently only
<code class="docutils literal notranslate"><span class="pre">STANDARD</span></code> and <code class="docutils literal notranslate"><span class="pre">INTELLIGENT_TIERING</span></code> storage classes are supported.
Default storage class is <code class="docutils literal notranslate"><span class="pre">STANDARD</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.signer-type</span></code></p></td>
<td><p>Specify a different signer type for S3-compatible storage.
Example: <code class="docutils literal notranslate"><span class="pre">S3SignerType</span></code> for v2 signer type</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.path-style-access</span></code></p></td>
<td><p>Use path-style access for all requests to the S3-compatible storage.
This is for S3-compatible storage that doesnt support virtual-hosted-style access.
(defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.staging-directory</span></code></p></td>
<td><p>Local staging directory for data written to S3.
This defaults to the Java temporary directory specified
by the JVM system property <code class="docutils literal notranslate"><span class="pre">java.io.tmpdir</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.pin-client-to-current-region</span></code></p></td>
<td><p>Pin S3 requests to the same region as the EC2
instance where Presto is running (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.ssl.enabled</span></code></p></td>
<td><p>Use HTTPS to communicate with the S3 API (defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.enabled</span></code></p></td>
<td><p>Use S3 server-side encryption (defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.type</span></code></p></td>
<td><p>The type of key management for S3 server-side encryption.
Use <code class="docutils literal notranslate"><span class="pre">S3</span></code> for S3 managed or <code class="docutils literal notranslate"><span class="pre">KMS</span></code> for KMS-managed keys
(defaults to <code class="docutils literal notranslate"><span class="pre">S3</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.kms-key-id</span></code></p></td>
<td><p>The KMS Key ID to use for S3 server-side encryption with
KMS-managed keys. If not set, the default key is used.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.kms-key-id</span></code></p></td>
<td><p>If set, use S3 client-side encryption and use the AWS
KMS to store encryption keys and use the value of
this property as the KMS Key ID for newly created
objects.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.encryption-materials-provider</span></code></p></td>
<td><p>If set, use S3 client-side encryption and use the
value of this property as the fully qualified name of
a Java class which implements the AWS SDKs
<code class="docutils literal notranslate"><span class="pre">EncryptionMaterialsProvider</span></code> interface.   If the
class also implements <code class="docutils literal notranslate"><span class="pre">Configurable</span></code> from the Hadoop
API, the Hadoop configuration will be passed in after
the object has been created.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.upload-acl-type</span></code></p></td>
<td><p>Canned ACL to use while uploading files to S3 (defaults
to <code class="docutils literal notranslate"><span class="pre">Private</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.skip-glacier-objects</span></code></p></td>
<td><p>Ignore Glacier objects rather than failing the query. This
will skip data that may be expected to be part of the table
or partition. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
</tbody>
</table>
<h3 id="s3-credentials">S3 Credentials<a class="headerlink" href="#s3-credentials" title="Link to this heading"></a></h3>
<p>If you are running Presto on Amazon EC2 using EMR or another facility,
it is recommended that you use IAM Roles for EC2 to govern access to S3. To enable this,
your EC2 instances will need to be assigned an IAM Role which grants appropriate
access to the data stored in the S3 bucket(s) you wish to use. Its also possible
to configure an IAM role with <code class="docutils literal notranslate"><span class="pre">hive.s3.iam-role</span></code> that will be assumed for accessing
any S3 bucket. This is much cleaner than setting AWS access and secret keys in the
<code class="docutils literal notranslate"><span class="pre">hive.s3.aws-access-key</span></code> and <code class="docutils literal notranslate"><span class="pre">hive.s3.aws-secret-key</span></code> settings, and also allows
EC2 to automatically rotate credentials on a regular basis without any additional
work on your part.</p>
<p>After the introduction of DefaultAWSCredentialsProviderChain, if neither IAM role nor
IAM credentials are configured, instance credentials will be used as they are the last item
in the DefaultAWSCredentialsProviderChain.</p>
<h3 id="custom-s3-credentials-provider">Custom S3 Credentials Provider<a class="headerlink" href="#custom-s3-credentials-provider" title="Link to this heading"></a></h3>
<p>You can configure a custom S3 credentials provider by setting the Hadoop
configuration property <code class="docutils literal notranslate"><span class="pre">presto.s3.credentials-provider</span></code> to be the
fully qualified class name of a custom AWS credentials provider
implementation. This class must implement the
<a class="reference external" href="http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/AWSCredentialsProvider.html">AWSCredentialsProvider</a>
interface and provide a two-argument constructor that takes a
<code class="docutils literal notranslate"><span class="pre">java.net.URI</span></code> and a Hadoop <code class="docutils literal notranslate"><span class="pre">org.apache.hadoop.conf.Configuration</span></code>
as arguments. A custom credentials provider can be used to provide
temporary credentials from STS (using <code class="docutils literal notranslate"><span class="pre">STSSessionCredentialsProvider</span></code>),
IAM role-based credentials (using <code class="docutils literal notranslate"><span class="pre">STSAssumeRoleSessionCredentialsProvider</span></code>),
or credentials for a specific use case (e.g., bucket/user specific credentials).
This Hadoop configuration property must be set in the Hadoop configuration
files referenced by the <code class="docutils literal notranslate"><span class="pre">hive.config.resources</span></code> Hive connector property.</p>
<h3 id="aws-security-mapping">AWS Security Mapping<a class="headerlink" href="#aws-security-mapping" title="Link to this heading"></a></h3>
<p>Presto supports flexible mapping for AWS Lake Formation and AWS S3 API calls, allowing for separate
credentials or IAM roles for specific users.</p>
<p>The mappings can be of two types: <code class="docutils literal notranslate"><span class="pre">S3</span></code> or <code class="docutils literal notranslate"><span class="pre">LAKEFORMATION</span></code>.</p>
<p>The mapping entries are processed in the order listed in the configuration
file. More specific mappings should be specified before less specific mappings.
You can set default configuration by not including any match criteria for the last
entry in the list.</p>
<p>Each mapping entry when mapping type is <code class="docutils literal notranslate"><span class="pre">S3</span></code> may specify one match criteria. Available match criteria:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code>: Regular expression to match against username. Example: <code class="docutils literal notranslate"><span class="pre">alice|bob</span></code></p></li>
</ul>
<p>The mapping must provide one or more configuration settings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accessKey</span></code> and <code class="docutils literal notranslate"><span class="pre">secretKey</span></code>: AWS access key and secret key. This overrides
any globally configured credentials, such as access key or instance credentials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iamRole</span></code>: IAM role to use. This overrides any globally configured IAM role.</p></li>
</ul>
<p>Example JSON configuration file for s3:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;accessKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AKIAxxxaccess&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;secretKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iXbXxxxsecret&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;analyst|scientist&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/analyst_and_scientist_role&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/default&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>
<p>Each mapping entry when mapping type is <code class="docutils literal notranslate"><span class="pre">LAKEFORMATION</span></code> may specify one match criteria. Available match criteria:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code>: Regular expression to match against username. Example: <code class="docutils literal notranslate"><span class="pre">alice|bob</span></code></p></li>
</ul>
<p>The mapping must provide one configuration setting:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iamRole</span></code>: IAM role to use. This overrides any globally configured IAM role.</p></li>
</ul>
<p>Example JSON configuration file for lakeformation:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;admin&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/admin_role&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;analyst&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/analyst_role&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/default_role&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.aws.security-mapping.type</span></code></p></td>
<td><p>AWS Security Mapping Type. Possible values: S3 or LAKEFORMATION</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.aws.security-mapping.config-file</span></code></p></td>
<td><p>JSON configuration file containing AWS IAM Security mappings</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.aws.security-mapping.refresh-period</span></code></p></td>
<td><p>Time interval after which AWS IAM security mapping configuration
will be refreshed</p></td>
</tr>
</tbody>
</table>
<h3 id="tuning-properties">Tuning Properties<a class="headerlink" href="#tuning-properties" title="Link to this heading"></a></h3>
<p>The following tuning properties affect the behavior of the client
used by the Presto S3 filesystem when communicating with S3.
Most of these parameters affect settings on the <code class="docutils literal notranslate"><span class="pre">ClientConfiguration</span></code>
object associated with the <code class="docutils literal notranslate"><span class="pre">AmazonS3Client</span></code>.</p>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-error-retries</span></code></p></td>
<td><p>Maximum number of error retries, set on the S3 client.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-client-retries</span></code></p></td>
<td><p>Maximum number of read attempts to retry.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-backoff-time</span></code></p></td>
<td><p>Use exponential backoff starting at 1 second up to
this maximum value when communicating with S3.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">minutes</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-retry-time</span></code></p></td>
<td><p>Maximum time to retry communicating with S3.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span> <span class="pre">minutes</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.connect-timeout</span></code></p></td>
<td><p>TCP connect timeout.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">seconds</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.socket-timeout</span></code></p></td>
<td><p>TCP socket read timeout.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">seconds</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-connections</span></code></p></td>
<td><p>Maximum number of simultaneous open connections to S3.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">500</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.multipart.min-file-size</span></code></p></td>
<td><p>Minimum file size before multi-part upload to S3 is used.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">16</span> <span class="pre">MB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.multipart.min-part-size</span></code></p></td>
<td><p>Minimum multi-part upload part size.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5</span> <span class="pre">MB</span></code></p></td>
</tr>
</tbody>
</table>
<h3 id="s3-data-encryption">S3 Data Encryption<a class="headerlink" href="#s3-data-encryption" title="Link to this heading"></a></h3>
<p>Presto supports reading and writing encrypted data in S3 using both
server-side encryption with S3 managed keys and client-side encryption using
either the Amazon KMS or a software plugin to manage AES encryption keys.</p>
<p>With <a class="reference external" href="http://docs.aws.amazon.com/AmazonS3/latest/dev/serv-side-encryption.html">S3 server-side encryption</a>,
(called <em>SSE-S3</em> in the Amazon documentation) the S3 infrastructure takes care of all encryption and decryption
work (with the exception of SSL to the client, assuming you have <code class="docutils literal notranslate"><span class="pre">hive.s3.ssl.enabled</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>).
S3 also manages all the encryption keys for you. To enable this, set <code class="docutils literal notranslate"><span class="pre">hive.s3.sse.enabled</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>With <a class="reference external" href="http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingClientSideEncryption.html">S3 client-side encryption</a>,
S3 stores encrypted data and the encryption keys are managed outside of the S3 infrastructure. Data is encrypted
and decrypted by Presto instead of in the S3 infrastructure. In this case, encryption keys can be managed
either by using the AWS KMS or your own key management system. To use the AWS KMS for key management, set
<code class="docutils literal notranslate"><span class="pre">hive.s3.kms-key-id</span></code> to the UUID of a KMS key. Your AWS credentials or EC2 IAM role will need to be
granted permission to use the given key as well.</p>
<p>To use a custom encryption key management system, set <code class="docutils literal notranslate"><span class="pre">hive.s3.encryption-materials-provider</span></code> to the
fully qualified name of a class which implements the
<a class="reference external" href="http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/EncryptionMaterialsProvider.html">EncryptionMaterialsProvider</a>
interface from the AWS Java SDK. This class will have to be accessible to the Hive Connector through the
classpath and must be able to communicate with your custom key management system. If this class also implements
the <code class="docutils literal notranslate"><span class="pre">org.apache.hadoop.conf.Configurable</span></code> interface from the Hadoop Java API, then the Hadoop configuration
will be passed in after the object instance is created and before it is asked to provision or retrieve any
encryption keys.</p>
<h3 id="id1">S3SelectPushdown<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>S3SelectPushdown enables pushing down projection (SELECT) and predicate (WHERE)
processing to <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectSELECTContent.html">S3 Select</a>.
With S3SelectPushdown Presto only retrieves the required data from S3 instead of
entire S3 objects reducing both latency and network usage.</p>
<h4 id="is-s3-select-a-good-fit-for-my-workload">Is S3 Select a good fit for my workload?<a class="headerlink" href="#is-s3-select-a-good-fit-for-my-workload" title="Link to this heading"></a></h4>
<p>Performance of S3SelectPushdown depends on the amount of data filtered by the
query. Filtering a large number of rows should result in better performance. If
the query doesnt filter any data then pushdown may not add any additional value
and user will be charged for S3 Select requests. Thus, we recommend that you
benchmark your workloads with and without S3 Select to see if using it may be
suitable for your workload. By default, S3SelectPushdown is disabled and you
should enable it in production after proper benchmarking and cost analysis. For
more information on S3 Select request cost, please see
<a class="reference external" href="https://aws.amazon.com/s3/pricing/">Amazon S3 Cloud Storage Pricing</a>.</p>
<p>Use the following guidelines to determine if S3 Select is a good fit for your
workload:</p>
<ul class="simple">
<li><p>Your query filters out more than half of the original data set.</p></li>
<li><p>Your query filter predicates use columns that have a data type supported by
Presto and S3 Select.
The <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, and <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> data types are not supported by S3
Select Pushdown. We recommend using the decimal data type for numerical data.
For more information about supported data types for S3 Select, see the
<a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/dev/s3-glacier-select-sql-reference-data-types.html">Data Types documentation</a>.</p></li>
<li><p>Your network connection between Amazon S3 and the Amazon EMR cluster has good
transfer speed and available bandwidth. Amazon S3 Select does not compress
HTTP responses, so the response size may increase for compressed input files.</p></li>
</ul>
<h4 id="considerations-and-limitations">Considerations and Limitations<a class="headerlink" href="#considerations-and-limitations" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Only objects stored in CSV format are supported. Objects can be uncompressed
or optionally compressed with gzip or bzip2.</p></li>
<li><p>The AllowQuotedRecordDelimiters property is not supported. If this property
is specified, the query fails.</p></li>
<li><p>Amazon S3 server-side encryption with customer-provided encryption keys
(SSE-C) and client-side encryption are not supported.</p></li>
<li><p>S3 Select Pushdown is not a substitute for using columnar or compressed file
formats such as ORC and Parquet.</p></li>
</ul>
<h4 id="enabling-s3-select-pushdown">Enabling S3 Select Pushdown<a class="headerlink" href="#enabling-s3-select-pushdown" title="Link to this heading"></a></h4>
<p>You can enable S3 Select Pushdown using the <code class="docutils literal notranslate"><span class="pre">s3_select_pushdown_enabled</span></code>
Hive session property or using the <code class="docutils literal notranslate"><span class="pre">hive.s3select-pushdown.enabled</span></code>
configuration property. The session property will override the config
property, allowing you enable or disable on a per-query basis. Non-filtering
queries (<code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">*</span> <span class="pre">FROM</span> <span class="pre">table</span></code>) are not pushed down to S3 Select,
as they retrieve the entire object content.</p>
<p>For uncompressed files, using supported formats and SerDes,
S3 Select scans ranges of bytes in parallel.
The scan range requests run across the byte ranges of the internal
Hive splits for the query fragments pushed down to S3 Select.
Parallelization is controlled by the existing <code class="docutils literal notranslate"><span class="pre">hive.max-split-size</span></code>
property.</p>
<h4 id="understanding-and-tuning-the-maximum-connections">Understanding and Tuning the Maximum Connections<a class="headerlink" href="#understanding-and-tuning-the-maximum-connections" title="Link to this heading"></a></h4>
<p>Presto can use its native S3 file system or EMRFS. When using the native FS, the
maximum connections is configured via the <code class="docutils literal notranslate"><span class="pre">hive.s3.max-connections</span></code>
configuration property. When using EMRFS, the maximum connections is configured
via the <code class="docutils literal notranslate"><span class="pre">fs.s3.maxConnections</span></code> Hadoop configuration property.</p>
<p>S3 Select Pushdown bypasses the file systems when accessing Amazon S3 for
predicate operations. In this case, the value of
<code class="docutils literal notranslate"><span class="pre">hive.s3select-pushdown.max-connections</span></code> determines the maximum number of
client connections allowed for those operations from worker nodes.</p>
<p>If your workload experiences the error <em>Timeout waiting for connection from
pool</em>, increase the value of both <code class="docutils literal notranslate"><span class="pre">hive.s3select-pushdown.max-connections</span></code> and
the maximum connections configuration for the file system you are using.</p>
<h2 id="alluxio-configuration">Alluxio Configuration<a class="headerlink" href="#alluxio-configuration" title="Link to this heading"></a></h2>
<p>Presto can read and write tables stored in the Alluxio Data Orchestration System
<a class="reference external" href="https://www.alluxio.io/?utm_source=prestodb&amp;utm_medium=prestodocs">Alluxio</a>,
leveraging Alluxios distributed block-level read/write caching functionality.
The tables must be created in the Hive metastore with the <code class="docutils literal notranslate"><span class="pre">alluxio://</span></code> location prefix
(see <a class="reference external" href="https://docs.alluxio.io/os/user/2.1/en/compute/Hive.html">Running Apache Hive with Alluxio</a>
for details and examples).
Presto queries will then transparently retrieve and cache files
or objects from a variety of disparate storage systems including HDFS and S3.</p>
<h3 id="alluxio-client-side-configuration">Alluxio Client-Side Configuration<a class="headerlink" href="#alluxio-client-side-configuration" title="Link to this heading"></a></h3>
<p>To configure Alluxio client-side properties on Presto, append the Alluxio
configuration directory (<code class="docutils literal notranslate"><span class="pre">${ALLUXIO_HOME}/conf</span></code>) to the Presto JVM classpath,
so that the Alluxio properties file <code class="docutils literal notranslate"><span class="pre">alluxio-site.properties</span></code> can be loaded as a resource.
Update the Presto <a class="reference internal" href="../installation/deployment.html#presto-jvm-config"><span class="std std-ref">JVM Config</span></a> file <code class="docutils literal notranslate"><span class="pre">etc/jvm.config</span></code> to include the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>-Xbootclasspath/a:&lt;path-to-alluxio-conf&gt;
</code></pre></div>
</div>
<p>The advantage of this approach is that all the Alluxio properties are set in
the single <code class="docutils literal notranslate"><span class="pre">alluxio-site.properties</span></code> file. For details, see <a class="reference external" href="https://docs.alluxio.io/os/user/2.1/en/compute/Presto.html#customize-alluxio-user-properties">Customize Alluxio User Properties</a>.</p>
<p>Alternatively, add Alluxio configuration properties to the Hadoop configuration
files (<code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code>, <code class="docutils literal notranslate"><span class="pre">hdfs-site.xml</span></code>) and configure the Hive connector
to use the <a class="reference external" href="#hdfs-configuration">Hadoop configuration files</a> via the
<code class="docutils literal notranslate"><span class="pre">hive.config.resources</span></code> connector property.</p>
<h3 id="deploy-alluxio-with-presto">Deploy Alluxio with Presto<a class="headerlink" href="#deploy-alluxio-with-presto" title="Link to this heading"></a></h3>
<p>To achieve the best performance running Presto on Alluxio, it is recommended
to collocate Presto workers with Alluxio workers. This allows reads and writes
to bypass the network. See <a class="reference external" href="https://www.alluxio.io/blog/top-5-performance-tuning-tips-for-running-presto-on-alluxio-1/?utm_source=prestodb&amp;utm_medium=prestodocs">Performance Tuning Tips for Presto with Alluxio</a>
for more details.</p>
<h3 id="alluxio-catalog-service">Alluxio Catalog Service<a class="headerlink" href="#alluxio-catalog-service" title="Link to this heading"></a></h3>
<p>An alternative way for Presto to interact with Alluxio is via the
<a class="reference external" href="https://docs.alluxio.io/os/user/stable/en/core-services/Catalog.html?utm_source=prestodb&amp;utm_medium=prestodocs">Alluxio Catalog Service.</a>.
The primary benefits for using the Alluxio Catalog Service are simpler
deployment of Alluxio with Presto, and enabling schema-aware optimizations
such as transparent caching and transformations. Currently, the catalog service
supports read-only workloads.</p>
<p>The Alluxio Catalog Service is a metastore that can cache the information
from different underlying metastores. It currently supports the Hive metastore
as an underlying metastore. In for the Alluxio Catalog to manage the metadata
of other existing metastores, the other metastores must be attached to the
Alluxio catalog. To attach an existing Hive metastore to the Alluxio
Catalog, simply use the
<a class="reference external" href="https://docs.alluxio.io/os/user/stable/en/operation/User-CLI.html#attachdb?utm_source=prestodb&amp;utm_medium=prestodocs">Alluxio CLI attachdb command</a>.
The appropriate Hive metastore location and Hive database name need to be
provided.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>./bin/alluxio table attachdb hive thrift://HOSTNAME:9083 hive_db_name
</code></pre></div>
</div>
<p>Once a metastore is attached, the Alluxio Catalog can manage and serve the
information to Presto. To configure the Hive connector for Alluxio
Catalog Service, simply configure the connector to use the Alluxio
metastore type, and provide the location to the Alluxio cluster.
For example, your <code class="docutils literal notranslate"><span class="pre">etc/catalog/catalog_alluxio.properties</span></code> will include
the following (replace the Alluxio address with the appropriate location):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><code>connector.name=hive-hadoop2
hive.metastore=alluxio
hive.metastore.alluxio.master.address=HOSTNAME:PORT
</code></pre></div>
</div>
<p>Now, Presto queries can take advantage of the Alluxio Catalog Service, such as
transparent caching and transparent transformations, without any modifications
to existing Hive metastore deployments.</p>
<h2 id="table-statistics">Table Statistics<a class="headerlink" href="#table-statistics" title="Link to this heading"></a></h2>
<p>The Hive connector automatically collects basic statistics
(<code class="docutils literal notranslate"><span class="pre">numFiles',</span> <span class="pre">``numRows</span></code>, <code class="docutils literal notranslate"><span class="pre">rawDataSize</span></code>, <code class="docutils literal notranslate"><span class="pre">totalSize</span></code>)
on <code class="docutils literal notranslate"><span class="pre">INSERT</span></code> and <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">AS</span></code> operations.</p>
<p>The Hive connector can also collect column level statistics:</p>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Column Type</p></th>
<th class="head"><p>Collectible Statistics</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">DECIMAL</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></p></td>
<td><p>number of nulls, number of distinct values, min/max values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code></p></td>
<td><p>number of nulls, number of distinct values</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p>number of nulls, number of distinct values</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VARBINARY</span></code></p></td>
<td><p>number of nulls</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p>number of nulls, number of true/false values</p></td>
</tr>
</tbody>
</table>
<p>Automatic column level statistics collection on write is controlled by
the <code class="docutils literal notranslate"><span class="pre">collect_column_statistics_on_write</span></code> catalog session property.</p>
<h2 id="collecting-table-and-column-statistics"><span id="hive-analyze"></span>Collecting table and column statistics<a class="headerlink" href="#collecting-table-and-column-statistics" title="Link to this heading"></a></h2>
<p>The Hive connector supports collection of table and partition statistics
via the <a class="reference internal" href="../sql/analyze.html"><span class="doc">ANALYZE</span></a> statement. When analyzing a partitioned table,
the partitions to analyze can be specified via the optional <code class="docutils literal notranslate"><span class="pre">partitions</span></code>
property, which is an array containing the values of the partition keys
in the order they are declared in the table schema:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">ANALYZE</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">sales</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">partitions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">[</span>
<span class="w">        </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;partition1_value1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;partition1_value2&#39;</span><span class="p">],</span>
<span class="w">        </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;partition2_value1&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;partition2_value2&#39;</span><span class="p">]]);</span>
</code></pre></div>
</div>
<p>This query will collect statistics for 2 partitions with keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">partition1_value1,</span> <span class="pre">partition1_value2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">partition2_value1,</span> <span class="pre">partition2_value2</span></code></p></li>
</ul>
<h2 id="quick-stats">Quick Stats<a class="headerlink" href="#quick-stats" title="Link to this heading"></a></h2>
<p>The Hive connector can build basic statistics for partitions with missing statistics
by examining file or table metadata. For example, Parquet footers can be used to infer
row counts, number of nulls, and min/max values. These quick statistics help in query planning,
and serve as as a temporary source of stats for partitions which havent had ANALYZE run on
them.</p>
<p>The following properties can be used to control how these quick stats are built:</p>
<table class="docutils data align-default">
<colgroup>
<col style="width: 20.0%" />
<col style="width: 70.0%" />
<col style="width: 10.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.enabled</span></code></p></td>
<td><p>Enable stats collection through quick stats providers. Also
toggleable through the <code class="docutils literal notranslate"><span class="pre">quick_stats_enabled</span></code> session property.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.max-concurrent-calls</span></code></p></td>
<td><p>Quick stats are built for multiple partitions concurrently. This
property sets the maximum number of concurrent builds that can
be made.</p></td>
<td><p>100</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.inline-build-timeout</span></code></p></td>
<td><p>Duration the query that initiates a quick stats build for a
partition should wait before timing out and returning empty
stats. Set this to <code class="docutils literal notranslate"><span class="pre">0s</span></code> if you want quick stats to only be
built in the background and not block query planning.
Also toggleable through the <code class="docutils literal notranslate"><span class="pre">quick_stats_inline_build_timeout</span></code>
session property.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">60s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.background-build-timeout</span></code></p></td>
<td><p>If a query observes that quick stats are being built for
a partition by another query, this is the duration it waits for
those stats to be built before returning empty stats.
Set this to <code class="docutils literal notranslate"><span class="pre">0s</span></code> if you want only one query to wait for
quick stats to be built (for a given partition).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0s</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.cache-expiry</span></code></p></td>
<td><p>Duration to retain the stats in the quick stats in-memory cache.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">24h</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.reaper-expiry</span></code></p></td>
<td><p>If the quick stats build for a partition is stuck (for example, due to
a long-running IO operation), a reaper job terminates any background
build threads so that a new fetch could be triggered afresh.
This property controls the duration, after a background build
thread is started, for the reaper to perform the termination.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5m</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.parquet.max-concurrent-calls</span></code></p></td>
<td><p>Multiple Parquet file footers are read and processed
concurrently. This property sets the maximum number of
concurrent calls that can be made.</p></td>
<td><p>500</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.quick-stats.parquet.file-metadata-fetch-timeout</span></code></p></td>
<td><p>Duration after which the Parquet quick stats builder will fail
and return empty stats.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">60s</span></code></p></td>
</tr>
</tbody>
</table>
<h2 id="schema-evolution">Schema Evolution<a class="headerlink" href="#schema-evolution" title="Link to this heading"></a></h2>
<p>Hive allows the partitions in a table to have a different schema than the
table. This occurs when the column types of a table are changed after
partitions already exist (that use the original column types). The Hive
connector supports this by allowing the same conversions as Hive:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">varchar</span></code> to and from <code class="docutils literal notranslate"><span class="pre">tinyint</span></code>, <code class="docutils literal notranslate"><span class="pre">smallint</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code> and <code class="docutils literal notranslate"><span class="pre">bigint</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">real</span></code> to <code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
<li><p>Widening conversions for integers, such as <code class="docutils literal notranslate"><span class="pre">tinyint</span></code> to <code class="docutils literal notranslate"><span class="pre">smallint</span></code></p></li>
</ul>
<p>In adition to the conversions above, the Hive connector does also support the following conversions when working with Parquet file format:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">integer</span></code> to <code class="docutils literal notranslate"><span class="pre">bigint</span></code>, <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bigint</span></code> to <code class="docutils literal notranslate"><span class="pre">real</span></code> and <code class="docutils literal notranslate"><span class="pre">double</span></code></p></li>
</ul>
<p>Any conversion failure will result in null, which is the same behavior
as Hive. For example, converting the string <code class="docutils literal notranslate"><span class="pre">'foo'</span></code> to a number,
or converting the string <code class="docutils literal notranslate"><span class="pre">'1234'</span></code> to a <code class="docutils literal notranslate"><span class="pre">tinyint</span></code> (which has a
maximum value of <code class="docutils literal notranslate"><span class="pre">127</span></code>).</p>
<h2 id="avro-schema-evolution">Avro Schema Evolution<a class="headerlink" href="#avro-schema-evolution" title="Link to this heading"></a></h2>
<p>Presto supports querying and manipulating Hive tables with Avro storage format which has the schema set
based on an Avro schema file/literal. It is also possible to create tables in Presto which infers the schema
from a valid Avro schema file located locally or remotely in HDFS/Web server.</p>
<p>To specify that Avro schema should be used for interpreting tables data one must use <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span></code> table property.
The schema can be placed remotely in
HDFS (e.g. <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span> <span class="pre">=</span> <span class="pre">'hdfs://user/avro/schema/avro_data.avsc'</span></code>),
S3 (e.g. <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span> <span class="pre">=</span> <span class="pre">'s3n:///schema_bucket/schema/avro_data.avsc'</span></code>),
a web server (e.g. <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span> <span class="pre">=</span> <span class="pre">'http://example.org/schema/avro_data.avsc'</span></code>)
as well as local file system. This url where the schema is located, must be accessible from the
Hive metastore and Presto coordinator/worker nodes.</p>
<p>The table created in Presto using <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span></code> behaves the same way as a Hive table with <code class="docutils literal notranslate"><span class="pre">avro.schema.url</span></code> or <code class="docutils literal notranslate"><span class="pre">avro.schema.literal</span></code> set.</p>
<p>Example:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">avro</span><span class="p">.</span><span class="n">avro_data</span><span class="w"> </span><span class="p">(</span>
<span class="w">   </span><span class="n">id</span><span class="w"> </span><span class="nb">bigint</span>
<span class="w"> </span><span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">   </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;AVRO&#39;</span><span class="p">,</span>
<span class="w">   </span><span class="n">avro_schema_url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;/usr/local/avro_data.avsc&#39;</span>
<span class="p">)</span>
</code></pre></div>
</div>
<p>The columns listed in the DDL (<code class="docutils literal notranslate"><span class="pre">id</span></code> in the above example) will be ignored if <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span></code> is specified.
The table schema will match the schema in the Avro schema file. Before any read operation, the Avro schema is
accessed so query result reflects any changes in schema. Thus Presto takes advantage of Avros backward compatibility abilities.</p>
<p>If the schema of the table changes in the Avro schema file, the new schema can still be used to read old data.
Newly added/renamed fields <em>must</em> have a default value in the Avro schema file.</p>
<p>The schema evolution behavior is as follows:</p>
<ul class="simple">
<li><p>Column added in new schema:
Data created with an older schema will produce a <em>default</em> value when table is using the new schema.</p></li>
<li><p>Column removed in new schema:
Data created with an older schema will no longer output the data from the column that was removed.</p></li>
<li><p>Column is renamed in the new schema:
This is equivalent to removing the column and adding a new one, and data created with an older schema
will produce a <em>default</em> value when table is using the new schema.</p></li>
<li><p>Changing type of column in the new schema:
If the type coercion is supported by Avro or the Hive connector, then the conversion happens.
An error is thrown for incompatible types.</p></li>
</ul>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Link to this heading"></a></h3>
<p>The following operations are not supported when <code class="docutils literal notranslate"><span class="pre">avro_schema_url</span></code> is set:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span> <span class="pre">AS</span></code> is not supported.</p></li>
<li><p>Using partitioning(<code class="docutils literal notranslate"><span class="pre">partitioned_by</span></code>) or bucketing(<code class="docutils literal notranslate"><span class="pre">bucketed_by</span></code>) columns are not supported in <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code> commands modifying columns are not supported.</p></li>
</ul>
<h2 id="parquet-writer-version">Parquet Writer Version<a class="headerlink" href="#parquet-writer-version" title="Link to this heading"></a></h2>
<p>Presto now supports Parquet writer versions V1 and V2 for the Hive catalog.
It can be toggled using the session property <code class="docutils literal notranslate"><span class="pre">parquet_writer_version</span></code> and the config property <code class="docutils literal notranslate"><span class="pre">hive.parquet.writer.version</span></code>.
Valid values for these properties are <code class="docutils literal notranslate"><span class="pre">PARQUET_1_0</span></code> and <code class="docutils literal notranslate"><span class="pre">PARQUET_2_0</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">PARQUET_2_0</span></code>.</p>
<h2 id="procedures">Procedures<a class="headerlink" href="#procedures" title="Link to this heading"></a></h2>
<p>Use the <a class="reference internal" href="../sql/call.html"><span class="doc">CALL</span></a> statement to perform data manipulation or
administrative tasks. Procedures must include a qualified catalog name, if your
Hive catalog is called <code class="docutils literal notranslate"><span class="pre">web</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="n">web</span><span class="p">.</span><span class="k">system</span><span class="p">.</span><span class="n">example_procedure</span><span class="p">()</span>
</code></pre></div>
</div>
<p>The following procedures are available:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">system.create_empty_partition(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">partition_columns,</span> <span class="pre">partition_values)</span></code></p>
<p>Create an empty partition in the specified table.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">system.sync_partition_metadata(schema_name,</span> <span class="pre">table_name,</span> <span class="pre">mode,</span> <span class="pre">case_sensitive)</span></code></p>
<p>Check and update partitions list in metastore. There are three modes available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ADD</span></code> : add any partitions that exist on the file system but not in the metastore.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DROP</span></code>: drop any partitions that exist in the metastore but not on the file system.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FULL</span></code>: perform both <code class="docutils literal notranslate"><span class="pre">ADD</span></code> and <code class="docutils literal notranslate"><span class="pre">DROP</span></code>.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">case_sensitive</span></code> argument is optional. The default value is <code class="docutils literal notranslate"><span class="pre">true</span></code> for compatibility
with Hives <code class="docutils literal notranslate"><span class="pre">MSCK</span> <span class="pre">REPAIR</span> <span class="pre">TABLE</span></code> behavior, which expects the partition column names in
file system paths to use lowercase (e.g. <code class="docutils literal notranslate"><span class="pre">col_x=SomeValue</span></code>). Partitions on the file system
not conforming to this convention are ignored, unless the argument is set to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">system.invalidate_directory_list_cache()</span></code></p>
<p>Flush full directory list cache.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">system.invalidate_directory_list_cache(directory_path)</span></code></p>
<p>Invalidate directory list cache for specified directory_path.</p>
</li>
</ul>
<h2 id="extra-hidden-columns">Extra Hidden Columns<a class="headerlink" href="#extra-hidden-columns" title="Link to this heading"></a></h2>
<p>The Hive connector exposes extra hidden metadata columns in Hive tables. Query these
columns as a part of the query like any other columns of the table.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$path</span></code> : Filepath for the given row data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$file_size</span></code> : Filesize for the given row (int64_t)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">$file_modified_time</span></code> : Last file modified time for the given row (int64_t), in milliseconds since January 1, 1970 UTC</p></li>
</ul>
<h2 id="how-to-invalidate-metastore-cache">How to invalidate metastore cache?<a class="headerlink" href="#how-to-invalidate-metastore-cache" title="Link to this heading"></a></h2>
<p>The Hive connector exposes a procedure over JMX (<code class="docutils literal notranslate"><span class="pre">com.facebook.presto.hive.metastore.CachingHiveMetastore#flushCache</span></code>) to invalidate the metastore cache.
You can call this procedure to invalidate the metastore cache by connecting via jconsole or jmxterm.</p>
<p>This is useful when the Hive metastore is updated outside of Presto and you want to make the changes visible to Presto immediately.</p>
<p>Currently, this procedure flushes the cache for all the tables in all the schemas. This is a known limitation and will be enhanced in the future.</p>
<h2 id="how-to-invalidate-directory-list-cache">How to invalidate directory list cache?<a class="headerlink" href="#how-to-invalidate-directory-list-cache" title="Link to this heading"></a></h2>
<p>The Hive connector exposes a procedure over JMX (<code class="docutils literal notranslate"><span class="pre">com.facebook.presto.hive.HiveDirectoryLister#flushCache</span></code>) to invalidate the directory list cache.
You can call this procedure to invalidate the directory list cache by connecting via jconsole or jmxterm.</p>
<p>This is useful when the files are added or deleted in the cache directory path and you want to make the changes visible to Presto immediately.</p>
<p>Currently, this procedure flushes all the cache entries. This is a known limitation and will be enhanced in the future.</p>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Link to this heading"></a></h2>
<p>The Hive connector supports querying and manipulating Hive tables and schemas
(databases). While some uncommon operations will need to be performed using
Hive directly, most operations can be performed using Presto.</p>
<h3 id="create-a-schema">Create a schema<a class="headerlink" href="#create-a-schema" title="Link to this heading"></a></h3>
<p>Create a new Hive schema named <code class="docutils literal notranslate"><span class="pre">web</span></code> that will store tables in an
S3 bucket named <code class="docutils literal notranslate"><span class="pre">my-bucket</span></code>:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span><span class="k">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;s3://my-bucket/&#39;</span><span class="p">)</span>
</code></pre></div>
</div>
<h3 id="create-a-managed-table">Create a managed table<a class="headerlink" href="#create-a-managed-table" title="Link to this heading"></a></h3>
<p>Create a new Hive table named <code class="docutils literal notranslate"><span class="pre">page_views</span></code> in the <code class="docutils literal notranslate"><span class="pre">web</span></code> schema
that is stored using the ORC file format, partitioned by date and
country, and bucketed by user into <code class="docutils literal notranslate"><span class="pre">50</span></code> buckets (note that Hive
requires the partition columns to be the last columns in the table):</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">page_views</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">view_time</span><span class="w"> </span><span class="k">timestamp</span><span class="p">,</span>
<span class="w">  </span><span class="n">user_id</span><span class="w"> </span><span class="nb">bigint</span><span class="p">,</span>
<span class="w">  </span><span class="n">page_url</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span>
<span class="w">  </span><span class="n">ds</span><span class="w"> </span><span class="nb">date</span><span class="p">,</span>
<span class="w">  </span><span class="n">country</span><span class="w"> </span><span class="nb">varchar</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ORC&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">partitioned_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;ds&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;country&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="n">bucketed_by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;user_id&#39;</span><span class="p">],</span>
<span class="w">  </span><span class="n">bucket_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span>
<span class="p">)</span>
</code></pre></div>
</div>
<h3 id="drop-a-partition">Drop a partition<a class="headerlink" href="#drop-a-partition" title="Link to this heading"></a></h3>
<p>Drop a partition from the <code class="docutils literal notranslate"><span class="pre">page_views</span></code> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">page_views</span>
<span class="k">WHERE</span><span class="w"> </span><span class="n">ds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">DATE</span><span class="w"> </span><span class="s1">&#39;2016-08-09&#39;</span>
<span class="w">  </span><span class="k">AND</span><span class="w"> </span><span class="n">country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;US&#39;</span>
</code></pre></div>
</div>
<h3 id="add-an-empty-partition">Add an empty partition<a class="headerlink" href="#add-an-empty-partition" title="Link to this heading"></a></h3>
<p>Add an empty partition to the <code class="docutils literal notranslate"><span class="pre">page_views</span></code> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="n">create_empty_partition</span><span class="p">(</span>
<span class="w">    </span><span class="k">schema_name</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">&#39;web&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="k">table_name</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="s1">&#39;page_views&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="n">partition_columns</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;ds&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;country&#39;</span><span class="p">],</span>
<span class="w">    </span><span class="n">partition_values</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;2016-08-09&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;US&#39;</span><span class="p">]);</span>
</code></pre></div>
</div>
<h3 id="query-a-table">Query a table<a class="headerlink" href="#query-a-table" title="Link to this heading"></a></h3>
<p>Query the <code class="docutils literal notranslate"><span class="pre">page_views</span></code> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">page_views</span>
</code></pre></div>
</div>
<h3 id="list-partitions">List partitions<a class="headerlink" href="#list-partitions" title="Link to this heading"></a></h3>
<p>List the partitions of the <code class="docutils literal notranslate"><span class="pre">page_views</span></code> table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="ss">&quot;page_views$partitions&quot;</span>
</code></pre></div>
</div>
<h3 id="create-an-external-table">Create an external table<a class="headerlink" href="#create-an-external-table" title="Link to this heading"></a></h3>
<p>Create an external Hive table named <code class="docutils literal notranslate"><span class="pre">request_logs</span></code> that points at
existing data in S3:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">request_logs</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">request_time</span><span class="w"> </span><span class="k">timestamp</span><span class="p">,</span>
<span class="w">  </span><span class="n">url</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span>
<span class="w">  </span><span class="n">ip</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span>
<span class="w">  </span><span class="n">user_agent</span><span class="w"> </span><span class="nb">varchar</span>
<span class="p">)</span>
<span class="k">WITH</span><span class="w"> </span><span class="p">(</span>
<span class="w">  </span><span class="n">format</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TEXTFILE&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="n">external_location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;s3://my-bucket/data/logs/&#39;</span>
<span class="p">)</span>
</code></pre></div>
</div>
<h3 id="drop-external-table">Drop external table<a class="headerlink" href="#drop-external-table" title="Link to this heading"></a></h3>
<p>Drop the external table <code class="docutils literal notranslate"><span class="pre">request_logs</span></code>. This only drops the metadata
for the table. The referenced data directory is not deleted:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span><span class="p">.</span><span class="n">request_logs</span>
</code></pre></div>
</div>
<h3 id="drop-schema">Drop schema<a class="headerlink" href="#drop-schema" title="Link to this heading"></a></h3>
<p>Drop a schema:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><code><span class="k">DROP</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">hive</span><span class="p">.</span><span class="n">web</span>
</code></pre></div>
</div>
<h2 id="hive-connector-limitations">Hive Connector Limitations<a class="headerlink" href="#hive-connector-limitations" title="Link to this heading"></a></h2>
<p><a class="reference internal" href="../sql/delete.html"><span class="doc">DELETE</span></a> is only supported if the <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> clause matches entire partitions.</p>



  




                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="hana.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: HANA Connector" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              HANA Connector
            </div>
          </div>
        </a>
      
      
        
        <a href="hive-security.html" class="md-footer__link md-footer__link--next" aria-label="Next: Hive Security Configuration" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Hive Security Configuration
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright The Presto Foundation. All rights reserved. Presto is a registered trademark of LF Projects, LLC.
        
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/prestodb/presto" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["toc.follow", "toc.sticky"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.f9d9eeeb247ace16c.min.js?v=8ec58cb5"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    
  </body>
</html>