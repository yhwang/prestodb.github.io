<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Simplifying Presto on Kubernetes - Introducing the Presto Helm Chart · </title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Let’s explore how to run Presto on Kubernetes. At PrestoCon Day 2023, Denis Krivenko of Platform24 shared his work on the Presto Helm Chart and why Presto on Kubernetes helps make for an efficient deployment. He also demoed a step-by-step process of deploying Presto on a Kubernetes cluster using the Helm package manager. "/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Simplifying Presto on Kubernetes - Introducing the Presto Helm Chart · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://yhwang.github.io/prestodb.github.io//blog/2023/08/02/presto-on-kubernetes-with-helm-prestocon-day"/><meta property="og:description" content="Let’s explore how to run Presto on Kubernetes. At PrestoCon Day 2023, Denis Krivenko of Platform24 shared his work on the Presto Helm Chart and why Presto on Kubernetes helps make for an efficient deployment. He also demoed a step-by-step process of deploying Presto on a Kubernetes cluster using the Helm package manager. "/><meta property="og:image" content="https://yhwang.github.io/prestodb.github.io/img/presto-logo-stacked.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://yhwang.github.io/prestodb.github.io/img/presto-logo-stacked.png"/><link rel="shortcut icon" href="/img/icon-presto-dots-color.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://js.hs-scripts.com/39785153.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-presto-white.svg" alt=""/><h2 class="headerTitleWithLogo"></h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/getting-started.html" target="_self">Get Started</a></li><li class=""><a href="/what-is-presto.html" target="_self">Learn</a></li><li class=""><a href="/community.html" target="_self">Community</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/docs/current" target="_blank">Docs</a></li><li class=""><a href="https://communityinviter.com/apps/prestodb/prestodb" target="_blank">Slack</a></li><li class=""><a href="https://github.com/prestodb/presto" target="_blank">GitHub</a></li><li class=""><a href="https://stackoverflow.com/questions/tagged/presto" target="_blank">Stackoverflow</a></li><li class=""><a href="https://twitter.com/prestodb" target="_blank">Twitter</a></li><li class=""><a href="https://www.linkedin.com/company/presto-foundation/" target="_blank">LinkedIn</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2023/08/29/presto-working-groups">Introducing Presto Working Groups</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/08/17/scaling-presto-panel-blog">Scaling Presto for Data Analytics - Insights from Meta, Uber, and Intuit</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2023/08/02/presto-on-kubernetes-with-helm-prestocon-day">Simplifying Presto on Kubernetes - Introducing the Presto Helm Chart</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/07/20/quick-stats-presto-blog">Quick Stats - Runtime ANALYZE for Better Query Plans with Presto</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/07/13/presto-at-bolt">Migrating to Presto - How Bolt Built a Data Platform Architecture for Scalability and Cost Efficiency</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2023/08/02/presto-on-kubernetes-with-helm-prestocon-day">Simplifying Presto on Kubernetes - Introducing the Presto Helm Chart</a></h1><p class="post-meta">August 2, 2023</p><div class="authorBlock"><p class="post-authorName"><a href="https://www.linkedin.com/in/alidodson/" target="_blank" rel="noreferrer noopener">Ali LeClerc, Chair of Presto Foundation Outreach Team</a></p></div></header><div><span><p>Let’s explore how to run Presto on Kubernetes. At PrestoCon Day 2023, Denis Krivenko of Platform24 shared his work on the Presto Helm Chart and why Presto on Kubernetes helps make for an efficient deployment. He also demoed a step-by-step process of deploying Presto on a Kubernetes cluster using the Helm package manager.</p>
<!--truncate-->
<div style="text-align: center;">
  <em>Sign up for the <a href="https://prestodb.io/newsletter.html" style="color:blue;">Presto community newsletter</a></em>
</div>
<p>Below we’ll explain why Kubernetes might be useful for Presto and a step-by-step tutorial on how to install Presto on Kubernetes using Helm.</p>
<h2><a class="anchor" aria-hidden="true" id="why-kubernetes"></a><a href="#why-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Why Kubernetes?</h2>
<p>To understand the significance of Kubernetes, we first need to compare different application deployment options. The traditional environment and virtual machine deployments offer limited scalability and isolation between applications, leading to version conflicts and time-consuming deployments.</p>
<p>On the other hand, container environments provide rapid application deployment and enhanced isolation, but they lack built-in scalability. Kubernetes addresses these challenges by providing a comprehensive orchestration infrastructure that enables horizontal scaling, high availability, and simplified container usage through its abstractions.</p>
<h2><a class="anchor" aria-hidden="true" id="understanding-kubernetes-deployments"></a><a href="#understanding-kubernetes-deployments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Understanding Kubernetes Deployments</h2>
<p>Kubernetes introduces several abstractions to simplify container usage within a cluster. These abstractions include Pods, Deployments, and Services. A Pod is the smallest unit in Kubernetes and represents one or more containers running on the same host, sharing an IP address and volumes. Deployments are used to manage multiple Pods, defining the number of replicas and their configurations. Services act as load balancers and provide a single entry point for accessing distributed applications running on multiple Pods.</p>
<p><img src="/img/blog/2023-08-02-presto-on-kubernetes-with-helm-prestocon-day/ApplicationResources.png" alt="ApplicationResources"></p>
<h2><a class="anchor" aria-hidden="true" id="deploying-presto-on-kubernetes"></a><a href="#deploying-presto-on-kubernetes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploying Presto on Kubernetes</h2>
<p>To deploy and manage complex applications like Presto on Kubernetes, we can leverage Helm, a package manager specifically designed for Kubernetes. Helm operates with charts, which are collections of Kubernetes resource templates and default values.</p>
<p>The <a href="https://github.com/prestodb/presto-helm-charts" style="color:blue;">official Helm chart for Presto</a> simplifies the deployment process by providing predefined resource definitions and customizable configurations for different environments. By using Helm, we can adhere to the DRY (Don't Repeat Yourself) principle and maintain consistency across multiple deployments.</p>
<h3><a class="anchor" aria-hidden="true" id="installation-and-deployment-modes"></a><a href="#installation-and-deployment-modes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installation and Deployment Modes</h3>
<p>The Presto Helm chart supports three deployment modes: single, cluster, and highly available cluster. Each mode caters to specific requirements and can be easily configured using Helm values.</p>
<p>In the single mode, Presto is deployed with one instance acting as both a coordinator and a worker. This mode is suitable for testing or environments with limited resources.</p>
<p><img src="/img/blog/2023-08-02-presto-on-kubernetes-with-helm-prestocon-day/Single.png" alt="Single"></p>
<p>The cluster mode deploys Presto in a production environment with one coordinator and multiple workers.</p>
<p><img src="/img/blog/2023-08-02-presto-on-kubernetes-with-helm-prestocon-day/Cluster.png" alt="Cluster"></p>
<p>Lastly, the highly available cluster mode ensures high availability by supporting multiple coordinators, workers, and resource managers.</p>
<p><img src="/img/blog/2023-08-02-presto-on-kubernetes-with-helm-prestocon-day/HACluster.png" alt="HACluster"></p>
<h2><a class="anchor" aria-hidden="true" id="installing-presto-on-kubernetes-using-helm"></a><a href="#installing-presto-on-kubernetes-using-helm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing Presto on Kubernetes using Helm</h2>
<p>You can take a look at Denis’ demo on <a href="https://youtu.be/qZwA4MSN08I?list=PLJVeO1NMmyqXm5_fuFoKyMfZWyT5jOeKh&t=741" style="color:blue;">how to install Presto in each deployment mode using the Helm commands</a>. Here’s a walkthrough:</p>
<p>Prerequisites:</p>
<ul>
<li>Kubernetes cluster up and running.</li>
<li>Helm installed on your local machine.</li>
</ul>
<p><strong>Step 1: Add Presto Helm Chart Repository</strong></p>
<p><code>helm repo add presto https://example.com/presto/charts</code></p>
<p><strong>Step 2: Explore the Helm Chart Information</strong></p>
<p><code>helm show chart presto/presto</code></p>
<p>This command will display essential information about the Presto Helm chart, such as the chart version, description, and other metadata.</p>
<p><strong>Step 3: Review Default Values</strong></p>
<p><code>helm show values presto/presto &gt; presto-values.yaml</code></p>
<p>This command will generate a presto-values.yaml file containing the default values used for the Presto deployment. You can customize these values as needed for your environment.</p>
<p><strong>Step 4: Install Presto in Single Mode</strong></p>
<p><code>helm install my-presto presto/presto --set mode=single</code></p>
<p>This command will install Presto using the single mode, where one instance acts as both the coordinator and worker. It is suitable for testing or resource-constrained environments.</p>
<p><strong>Step 5: Check Deployment Status</strong></p>
<p><code>kubectl get pods</code></p>
<p>This command will show the status of the Presto Pods. Ensure that the coordinator and worker Pods are running and ready.</p>
<p><strong>Step 6: Access Presto UI</strong></p>
<p><code>kubectl port-forward svc/my-presto-coordinator 8080:8080</code></p>
<p>This command will create a port-forwarding tunnel, allowing you to access the Presto UI at <a href="http://localhost:8080">http://localhost:8080</a> on your local machine.</p>
<p><strong>Step 7: Uninstall Presto</strong></p>
<p><code>helm uninstall my-presto</code></p>
<p>If you wish to remove the Presto deployment, use this command to uninstall the release.</p>
<p><strong>Step 8: Install Presto in Cluster Mode</strong></p>
<p><code>helm install my-presto presto/presto --set mode=cluster</code></p>
<p>This command will install Presto in the cluster mode, suitable for production environments with one coordinator and multiple workers.</p>
<p><strong>Step 9: Check Deployment Status</strong></p>
<p><code>kubectl get pods</code></p>
<p>Ensure that all Presto Pods are running and ready.</p>
<p><strong>Step 10: Access Presto UI</strong></p>
<p><code>kubectl port-forward svc/my-presto-coordinator 8080:8080</code></p>
<p>Access the Presto UI at <a href="http://localhost:8080">http://localhost:8080</a> on your local machine.</p>
<p><strong>Step 11: Install Presto in Highly Available (HA) Cluster Mode</strong></p>
<p><code>helm install my-presto presto/presto --set mode=ha --set coordinator.replicas=2</code></p>
<p>This command will install Presto in the highly available cluster mode with two coordinators and multiple workers.</p>
<p><strong>Step 12: Check Deployment Status</strong></p>
<p><code>kubectl get pods</code></p>
<p>Ensure all Presto Pods, including coordinators and workers, are running and ready.</p>
<p><strong>Step 13: Access Presto UI</strong></p>
<p><code>kubectl port-forward svc/my-presto-coordinator 8080:8080</code></p>
<p>Access the Presto UI at <a href="http://localhost:8080">http://localhost:8080</a> on your local machine.</p>
<p>Congratulations! You have successfully installed Presto on Kubernetes using the Helm package manager. With Presto up and running, you can now explore its powerful distributed SQL query capabilities and utilize Kubernetes' scalability and resource management features for efficient data analytics. Remember to customize the values in <code>presto-values.yaml</code> and the Helm commands according to your specific requirements and environment.</p>
<h2><a class="anchor" aria-hidden="true" id="future-initiatives"></a><a href="#future-initiatives" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Future Initiatives</h2>
<p>While the Presto Helm chart offers a streamlined deployment experience, there are ongoing initiatives and future improvements on the roadmap. Documentation, testing, auto-scaling capabilities, support for high-performance native workers, and additional features and enhancements are some areas of focus.</p>
<p>We encourage the community to contribute to the chart's development by reporting issues, suggesting features, and submitting pull requests. With these ongoing efforts, the Presto Helm chart aims to achieve a stable 1.0 release and further enhance the deployment experience for data engineers. Here’s the repo: <a href="https://github.com/prestodb/presto-helm-charts" style="color:blue;">https://github.com/prestodb/presto-helm-charts</a>.</p>
<p>Check out the full <a href="https://www.youtube.com/watch?v=qZwA4MSN08I&list=PLJVeO1NMmyqXm5_fuFoKyMfZWyT5jOeKh&index=19" style="color:blue;">presentation from PrestoCon Day here</a>.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#why-kubernetes">Why Kubernetes?</a></li><li><a href="#understanding-kubernetes-deployments">Understanding Kubernetes Deployments</a></li><li><a href="#deploying-presto-on-kubernetes">Deploying Presto on Kubernetes</a><ul class="toc-headings"><li><a href="#installation-and-deployment-modes">Installation and Deployment Modes</a></li></ul></li><li><a href="#installing-presto-on-kubernetes-using-helm">Installing Presto on Kubernetes using Helm</a></li><li><a href="#future-initiatives">Future Initiatives</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © The Presto Foundation.<br/>All rights reserved. Presto is a registered trademark of LF Projects, LLC. <br/>Please see our<a href="https://lfprojects.org/policies/trademark-policy/">Trademark Policy</a> for more information.<br/><a href="https://lfprojects.org/policies/privacy-policy/">Privacy Policy</a> |<a href="https://lfprojects.org/policies/terms-of-use/">Terms of Use</a>.</section></footer></div></body></html>