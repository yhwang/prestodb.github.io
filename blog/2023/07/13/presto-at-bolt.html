<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Migrating to Presto - How Bolt Built a Data Platform Architecture for Scalability and Cost Efficiency · </title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="At PrestoCon Day we heard from Bolt, a ride sharing app with 100 million users across 45 countries in Eastern Europe, who shared why they chose Presto to underpin their data architecture platform. By leveraging Presto&#x27;s capabilities, Bolt was able to address scalability limits, cost efficiency, and workload management challenges. In this blog we’ll recap the presentation delivered by Bolt, which includes their data platform architecture, challenges faced, the migration process, and what their outcomes were."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Migrating to Presto - How Bolt Built a Data Platform Architecture for Scalability and Cost Efficiency · "/><meta property="og:type" content="website"/><meta property="og:url" content="https://yhwang.github.io/prestodb.github.io//blog/2023/07/13/presto-at-bolt"/><meta property="og:description" content="At PrestoCon Day we heard from Bolt, a ride sharing app with 100 million users across 45 countries in Eastern Europe, who shared why they chose Presto to underpin their data architecture platform. By leveraging Presto&#x27;s capabilities, Bolt was able to address scalability limits, cost efficiency, and workload management challenges. In this blog we’ll recap the presentation delivered by Bolt, which includes their data platform architecture, challenges faced, the migration process, and what their outcomes were."/><meta property="og:image" content="https://yhwang.github.io/prestodb.github.io/img/presto-logo-stacked.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://yhwang.github.io/prestodb.github.io/img/presto-logo-stacked.png"/><link rel="shortcut icon" href="/img/icon-presto-dots-color.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/css/custom.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://js.hs-scripts.com/39785153.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-presto-white.svg" alt=""/><h2 class="headerTitleWithLogo"></h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/getting-started.html" target="_self">Get Started</a></li><li class=""><a href="/what-is-presto.html" target="_self">Learn</a></li><li class=""><a href="/community.html" target="_self">Community</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/docs/current" target="_blank">Docs</a></li><li class=""><a href="https://communityinviter.com/apps/prestodb/prestodb" target="_blank">Slack</a></li><li class=""><a href="https://github.com/prestodb/presto" target="_blank">GitHub</a></li><li class=""><a href="https://stackoverflow.com/questions/tagged/presto" target="_blank">Stackoverflow</a></li><li class=""><a href="https://twitter.com/prestodb" target="_blank">Twitter</a></li><li class=""><a href="https://www.linkedin.com/company/presto-foundation/" target="_blank">LinkedIn</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/blog/2023/08/29/presto-working-groups">Introducing Presto Working Groups</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/08/17/scaling-presto-panel-blog">Scaling Presto for Data Analytics - Insights from Meta, Uber, and Intuit</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/08/02/presto-on-kubernetes-with-helm-prestocon-day">Simplifying Presto on Kubernetes - Introducing the Presto Helm Chart</a></li><li class="navListItem"><a class="navItem" href="/blog/2023/07/20/quick-stats-presto-blog">Quick Stats - Runtime ANALYZE for Better Query Plans with Presto</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2023/07/13/presto-at-bolt">Migrating to Presto - How Bolt Built a Data Platform Architecture for Scalability and Cost Efficiency</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2023/07/13/presto-at-bolt">Migrating to Presto - How Bolt Built a Data Platform Architecture for Scalability and Cost Efficiency</a></h1><p class="post-meta">July 13, 2023</p><div class="authorBlock"><p class="post-authorName"><a href="https://www.linkedin.com/in/alidodson/" target="_blank" rel="noreferrer noopener">Ali LeClerc, Chair of Presto Foundation Outreach Team</a></p></div></header><div><span><p>At PrestoCon Day we heard from Bolt, a ride sharing app with 100 million users across 45 countries in Eastern Europe, who shared why they chose Presto to underpin their data architecture platform. By leveraging Presto's capabilities, Bolt was able to address scalability limits, cost efficiency, and workload management challenges. In this blog we’ll recap the presentation delivered by Bolt, which includes their data platform architecture, challenges faced, the migration process, and what their outcomes were.</p>
<!--truncate-->
<div style="text-align: center;">
  <em>Sign up for the <a href="https://prestodb.io/newsletter.html" style="color:blue;">Presto community newsletter</a></em>
</div>
<br>
<h2><a class="anchor" aria-hidden="true" id="bolts-initial-data-platform-architecture"></a><a href="#bolts-initial-data-platform-architecture" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bolt's Initial Data Platform Architecture</h2>
<p>Bolt’s initial architecture leveraged AWS services, with data flowing from various sources into S3, using Redshift as their centralized data warehouse solution. Spark played a crucial role in processing the data, while Looker served as their primary business intelligence (BI) tool.</p>
<p><img src="/img/blog/2023-07-13-presto-at-bolt/Boltlegacyplatform.png" alt="Boltlegacyplatform"></p>
<p>This architecture faced scalability limits, cost inefficiencies, and challenges with workload management. These limitations became apparent as Bolt's user base and data volume grew. Redshift's scalability constraints hindered further expansion, and workload management became complex, leading to occasional performance degradation. Additionally, cost attribution and visibility into Redshift costs posed challenges.</p>
<p>They needed a data platform that would be able to handle:</p>
<ul>
<li>2+ PB of structured data (mostly parquet)</li>
<li>2K+ active internal users (ops, BI, data analysts, data scientists)</li>
<li>Peak load of 100K+ queries/day</li>
<li>1.5M+ queries/month</li>
<li>Lots of complex Looker-generated queries with 50+ joins</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="evaluating-alternatives"></a><a href="#evaluating-alternatives" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Evaluating Alternatives</h2>
<p>To address these challenges, Bolt embarked on an evaluation of alternative solutions. They explored options like Snowflake, BigQuery, Trino, Databricks SQL Analytics, and Redshift Spectrum. While each had its strengths, Bolt considered factors such as price-performance, vendor lock-in, and ease of implementation.</p>
<p>Ultimately, they chose Presto and partnered with Ahana to implement it. When asked why they didn’t choose a competitive technology like Trino, Kostiantyn shared that they were looking for a project with open governance that was focused on the Data Lakehouse, and Trino did not check these boxes.</p>
<h2><a class="anchor" aria-hidden="true" id="choosing-presto--their-migration-journey"></a><a href="#choosing-presto--their-migration-journey" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Choosing Presto &amp; their migration journey</h2>
<p>Bolt's decision to adopt Presto was based on several factors. Presto's separation of storage and compute, open-source nature, and Ahana’s managed Presto infrastructure offering within AWS aligned well with their requirements. This partnership saved time in building the Presto infrastructure and accelerated their migration process.</p>
<p>The migration to Presto was a massive undertaking for Bolt. They faced the challenge of migrating hundreds of existing jobs and thousands of tables while adapting queries and data layouts to work optimally with Presto. The self-service aspect was crucial, enabling teams to migrate their workloads independently. Data synchronization and consistency verification were key to keeping the business running during the migration process.</p>
<p><img src="/img/blog/2023-07-13-presto-at-bolt/Boltmigrationtimeline.png" alt="Boltmigrationtimeline"></p>
<h2><a class="anchor" aria-hidden="true" id="bolts-new-architecture-presto-for-the-data-lakehouse"></a><a href="#bolts-new-architecture-presto-for-the-data-lakehouse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bolt’s New Architecture: Presto for the Data Lakehouse</h2>
<p>The migration to Presto transformed Bolt's data platform architecture. They rebuilt their ingestion pipeline using structured Spark streaming, ingesting data from Kafka into an S3-based data lake powered by Delta Lake. Presto replaced Redshift as the primary query engine for BI, with over 10 Presto clusters supporting different business verticals. AWS Glue continued to serve as their data catalog.</p>
<p><img src="/img/blog/2023-07-13-presto-at-bolt/PrestoatBoltarchitecture.png" alt="Prestoatboltarchitecture"></p>
<h3><a class="anchor" aria-hidden="true" id="post-migration-challenges-and-solutions"></a><a href="#post-migration-challenges-and-solutions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Post-Migration Challenges and Solutions</h3>
<p>While the migration was successful, Bolt encountered some post-migration challenges. First was AWS-specific issues with S3 and AWS Glue's performance - they were paying over 10% of total Presto costs for list requests at one point. Glue can also be a bottleneck, so they had to work on fine-tuning the metadata cache and increasing limits with AWS.</p>
<p>Next was around stats collection and addressing stats collection bugs. Because stats collection can be expensive, they created an event-based pipeline for stats collection to improve efficiency and had to fix some Presto-related edge cases related to stats collection.</p>
<p>To address OOM/memory leads/performance degradation, they split workloads by business verticals and tweaked memory settings and instance types per workload.</p>
<p>For autoscaling optimization, the used a mix of CPU-based autoscaling and scheduled scaling to “preheat” the clusters.</p>
<p>They realized they had lots of unoptimized or poorly migrated workloads. The learning here was that a new query engine will not fix your data modeling, so he encouraged companies making the same migration to clean up outdated and unused workloads and monitor usage.</p>
<p>Finally, managing costs would continue to be critical for Bolt. He shared that it was hard to work on migration and cost optimization at the same time, but spot instances allowed for significant cost savings.</p>
<h3><a class="anchor" aria-hidden="true" id="outcomes"></a><a href="#outcomes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Outcomes</h3>
<p>Moving to a Presto-based open data lakehouse helped alleviate some critical issues in their legacy architecture in addition to saving on costs. Here are five key areas that Bolt recognized improvements:</p>
<ol>
<li><p>No More Fires during Peak Load: One of the most significant improvements for Bolt was the elimination of fires caused by the heavy load on Mondays. With their previous architecture, peak loads often led to performance issues and system failures. However, with the migration to Presto, Bolt successfully tackled the scalability challenges and bid farewell to those dreaded Monday incidents. The new architecture handled the high load seamlessly, ensuring smooth operations even during peak periods.</p></li>
<li><p>Reduction in Average Query Runtime by ~30%: Bolt witnessed a significant improvement in query performance after migrating to Presto. On average, query runtimes decreased by approximately 30%. This improvement was a direct result of Presto's distributed nature and Bolt's ability to scale resources independently. Faster query processing translated into quicker insights, empowering teams to make data-driven decisions with greater efficiency.</p></li>
<li><p>Reduction in Blast Radius - Issues Are More Localized: With their previous architecture, any performance issues or heavy workloads could have a widespread impact, affecting other critical processes. However, the migration to Presto brought a significant reduction in the blast radius of such issues. Now, when problems occur, they are more localized to specific clusters, minimizing the impact on other business operations. This enhanced isolation ensures smoother overall system performance and reliability.</p></li>
<li><p>Self-Service Improvements: Bolt's migration to Presto also empowered their teams through enhanced self-service capabilities. Analysts, high-level personnel, and data scientists gained the ability to migrate workloads, create dashboards, and perform data transformations independently. This self-service approach reduced dependency on the data platform team and streamlined the migration process. Analysts could focus on their specific needs, resulting in faster insights and increased productivity.</p></li>
<li><p>Costs Stabilized with Optimization Opportunities: The migration to Presto allowed Bolt to stabilize their costs and optimize their infrastructure. By leveraging open-source technologies and managed Presto infrastructure from Ahana, Bolt minimized vendor lock-in and achieved better cost efficiency. Additionally, they identified optimization opportunities with spot instances, which could provide further cost savings. With a stabilized cost structure and ongoing optimization efforts, Bolt's data platform became a more cost-effective and sustainable solution.</p></li>
</ol>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>The migration of Bolt's data platform to Presto helped address scalability, cost efficiency, and workload management challenges. By leveraging Presto's distributed SQL query engine, Bolt transformed its architecture, unlocking new possibilities for data analytics and business intelligence.</p>
<p>With the adoption of Presto, Bolt achieved enhanced scalability, breaking free from the limitations of their previous architecture. The separation of storage and compute provided the flexibility to scale resources independently, enabling Bolt to handle the growing user base and data volume seamlessly.</p>
<p>The migration to Presto also brought significant cost savings for Bolt. By utilizing the open-source nature of Presto and partnering with Ahana for managed Presto infrastructure, Bolt minimized vendor lock-in and optimized their infrastructure costs. The self-service migration approach empowered teams to migrate their workloads independently, improving efficiency and reducing operational overhead.</p>
<p>Bolt was also able to streamline their data ingestion pipeline and leverage the power of structured streaming. With multiple Presto clusters supporting different business verticals, Bolt achieved faster and more efficient query processing, empowering their teams with real-time insights for decision-making.</p>
<p>Watch the full <a href="https://www.youtube.com/watch?v=G9LDAxxKsAE&list=PLJVeO1NMmyqXm5_fuFoKyMfZWyT5jOeKh&index=9" style="color:blue;">Implementing a Lakehouse architecture with Presto at Bolt presentation</a> from PrestoCon Day.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog/">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#bolts-initial-data-platform-architecture">Bolt's Initial Data Platform Architecture</a></li><li><a href="#evaluating-alternatives">Evaluating Alternatives</a></li><li><a href="#choosing-presto--their-migration-journey">Choosing Presto &amp; their migration journey</a></li><li><a href="#bolts-new-architecture-presto-for-the-data-lakehouse">Bolt’s New Architecture: Presto for the Data Lakehouse</a><ul class="toc-headings"><li><a href="#post-migration-challenges-and-solutions">Post-Migration Challenges and Solutions</a></li><li><a href="#outcomes">Outcomes</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="copyright">Copyright © The Presto Foundation.<br/>All rights reserved. Presto is a registered trademark of LF Projects, LLC. <br/>Please see our<a href="https://lfprojects.org/policies/trademark-policy/">Trademark Policy</a> for more information.<br/><a href="https://lfprojects.org/policies/privacy-policy/">Privacy Policy</a> |<a href="https://lfprojects.org/policies/terms-of-use/">Terms of Use</a>.</section></footer></div></body></html>